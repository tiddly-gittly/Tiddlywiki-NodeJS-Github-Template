[
    {
        "author": "LinOnetwo",
        "dependents": "",
        "description": "External attachments for TidGi Desktop App with sub-wiki routing support. Drag&drop image/binary file to wiki, and become skinny tiddler (a pointer to actual file). Files automatically route to correct sub-wiki based on tags.",
        "list": "readme settings tree changelog",
        "name": "External Attachments for TidGi app",
        "plugin-type": "plugin",
        "stability": "STABILITY_1_EXPERIMENTAL",
        "text": "{\"tiddlers\":{\"$:/plugins/linonetwo/tidgi-external-attachments/changelog\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/changelog\",\"text\":\"! Changelog\\n\\n!! 1.10.0\\n\\n* Add view toolbar button to convert embedded binary tiddlers to external attachments\\n\\n!! Version 1.9.0\\n\\n* ''Breaking Change'': Requires TidGi-Desktop version 0.14.0 or higher\\n* ''Architecture Change'': Removed `th-saving-tiddler` hook handler - file movement on tag changes now handled by backend FileSystemAdaptor\\n** Backend automatically moves external attachment files when tiddler is routed to different workspace\\n** More reliable - works regardless of how tiddler is saved (direct tag edit, draft editor, IPC call, etc.)\\n** No frontend/backend duplication - single source of truth\\n* ''Plugin Scope'': Now focuses on file import (`th-importing-file`, `th-before-importing`) and deletion (`th-deleting-tiddler`) hooks only\\n\\n!! Version 1.8.0\\n\\n* ''Feature'': Sub-wiki routing support\\n** Imported files now automatically route to the correct sub-wiki's files folder based on tiddler tags\\n** Uses the same routing logic as TidGi's FileSystemAdaptor\\n** Supports direct tag matching, tag tree matching (includeTagTree), and custom filter expressions\\n** Files are moved to the matched sub-wiki's configured files folder (based on WIKI_FOLDER_TO_MOVE_TITLE)\\n* ''Improvement'': Extracted sub-wiki routing logic into reusable utility module\\n* ''Enhancement'': Updated type definitions to support workspace service methods\\n\\n!! Version 1.7.0\\n\\n* ''Breaking Change'': Requires TidGi-Desktop version 0.13.0 or higher\\n** Updated API usage: replaced `window?.meta?.()?.workspaceID` with `window?.meta?.()?.workspace`\\n\"},\"$:/config/ExternalAttachments/Enable\":{\"title\":\"$:/config/ExternalAttachments/Enable\",\"text\":\"yes\"},\"$:/config/ExternalAttachments/EnableForImage\":{\"title\":\"$:/config/ExternalAttachments/EnableForImage\",\"text\":\"yes\"},\"$:/config/ExternalAttachments/MoveToWikiFolder\":{\"title\":\"$:/config/ExternalAttachments/MoveToWikiFolder\",\"text\":\"yes\"},\"$:/config/ExternalAttachments/WikiFolderToMove\":{\"title\":\"$:/config/ExternalAttachments/WikiFolderToMove\",\"text\":\"files\"},\"$:/config/ExternalAttachments/UseAbsoluteForDescendents\":{\"title\":\"$:/config/ExternalAttachments/UseAbsoluteForDescendents\",\"text\":\"no\"},\"$:/config/ExternalAttachments/UseAbsoluteForNonDescendents\":{\"title\":\"$:/config/ExternalAttachments/UseAbsoluteForNonDescendents\",\"text\":\"yes\"},\"$:/config/ExternalAttachments/MoveToTrash\":{\"title\":\"$:/config/ExternalAttachments/MoveToTrash\",\"text\":\"yes\"},\"$:/plugins/linonetwo/tidgi-external-attachments/notifications/conversion-error-en-GB\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/notifications/conversion-error-en-GB\",\"text\":\"Failed to convert <<title>>!\\n\\nError: <<error>>\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/notifications/conversion-error\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/notifications/conversion-error\",\"text\":\"è½¬æ¢ <<title>> å¤±è´¥ï¼\\n\\né”™è¯¯ä¿¡æ¯ï¼š<<error>>\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/notifications/conversion-success-en-GB\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/notifications/conversion-success-en-GB\",\"text\":\"Successfully converted <<title>> to external attachment!\\n\\nFile saved to: <<filepath>>\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/notifications/conversion-success\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/notifications/conversion-success\",\"text\":\"æˆåŠŸå°† <<title>> è½¬æ¢ä¸ºå¤–éƒ¨é™„ä»¶ï¼\\n\\næ–‡ä»¶å·²ä¿å­˜åˆ°ï¼š<<filepath>>\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/caption-en-GB\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/caption-en-GB\",\"text\":\"Convert to External\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/caption\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/caption\",\"text\":\"è½¬ä¸ºå¤–éƒ¨é™„ä»¶\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/hint-en-GB\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/hint-en-GB\",\"text\":\"Convert this embedded binary tiddler to an external attachment\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/hint\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/hint\",\"text\":\"å°†æ­¤å†…åµŒäºŒè¿›åˆ¶æ¡ç›®è½¬æ¢ä¸ºå¤–éƒ¨é™„ä»¶\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/icon\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/icon\",\"text\":\"<svg width=\\\"22pt\\\" height=\\\"22pt\\\" class=\\\"tc-image-phi-rocket-launch-fill tc-image-button\\\" viewBox=\\\"0 0 256 256\\\"><rect width=\\\"256\\\" height=\\\"256\\\" fill=\\\"none\\\"/><g><path d=\\\"M96.58887,176.979a8.00118,8.00118,0,0,0-10.12012,5.06006C79.916,201.69775,58.57422,207.78613,46.332,209.669c1.88281-12.24854,7.97168-33.58594,27.62988-40.13819a8.00027,8.00027,0,1,0-5.06054-15.1792c-16.36035,5.45362-28.37891,18.45069-34.75782,37.58692a92.73335,92.73335,0,0,0-4.65332,26.57129,8.00041,8.00041,0,0,0,8,8,92.73569,92.73569,0,0,0,26.57129-4.65332c19.13575-6.37842,32.13282-18.39747,37.58692-34.75782A8.001,8.001,0,0,0,96.58887,176.979Z\\\"/><path d=\\\"M227.6123,41.82031A15.879,15.879,0,0,0,214.17871,28.3877c-11.28613-1.68409-40.62109-2.51319-69.209,26.07324l-8.97046,8.9707H74.74512a15.90118,15.90118,0,0,0-11.31446,4.686L31.08887,100.46a16.00008,16.00008,0,0,0,8.17675,27.00244l39.53492,7.90723,41.82983,41.82959,7.90674,39.53516a15.99768,15.99768,0,0,0,27.00391,8.17578l32.34179-32.34229a15.8955,15.8955,0,0,0,4.68555-11.313V120l8.9707-8.9707C230.127,82.44141,229.29688,53.10645,227.6123,41.82031ZM74.74512,79.43164h45.25439l-39.884,39.88379-37.71216-7.542ZM176.56836,181.25488l-32.3418,32.3418-7.54223-37.71191,39.884-39.88428Z\\\"/></g></svg>\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal\",\"tags\":\"$:/tags/ViewToolbar\",\"caption\":\"{{$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/icon}} {{$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/caption}}\",\"description\":\"{{$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/hint}}\",\"list-before\":\"$:/core/ui/Buttons/permalink\",\"text\":\"\\\\whitespace trim\\n\\\\procedure convert-to-external-attachment-actions()\\n<$action-sendmessage\\n  $message=\\\"tm-convert-to-external-attachment\\\"\\n  $param=<<currentTiddler>>\\n/>\\n\\\\end\\n\\n<%if [<currentTiddler>is[binary]!has[_canonical_uri]] %>\\n  <$button\\n    tooltip={{$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/hint}}\\n    aria-label={{$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/caption}}\\n    class=<<tv-config-toolbar-class>>\\n    actions=<<convert-to-external-attachment-actions>>\\n  >\\n    <%if [<tv-config-toolbar-icons>match[yes]] %>\\n      {{$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/icon}}\\n    <%endif%>\\n    <%if [<tv-config-toolbar-text>match[yes]] %>\\n      <span class=\\\"tc-btn-text\\\">\\n        <$text text={{$:/plugins/linonetwo/tidgi-external-attachments/ui/Buttons/ConvertToExternal/caption}}/>\\n      </span>\\n    <%endif%>\\n  </$button>\\n<%endif%>\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/extlink/en-GB\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/extlink/en-GB\",\"text\":\"!ï¼ Introduction\\n\\nThis plugin provides support for importing tiddlers as external attachments.\\n\\nOn the TidGi App, you can choose to import the binary large file as a 'reference tiddler', which means that the tiddler will refer to the original file via the ''_canonical_uri'' field, while itself will be almost an empty file, thus saving storage space in the Wiki. This reduces the size of the wiki and thus improves performance. However, it does mean that the wiki is no longer fully self-contained.\\n\\n!ï¼ Compatibility\\n\\nThis plugin only works when using TiddlyWiki with platforms such as TiddlyDesktop/TidGi Desktop that support the ''path'' attribute for imported/dragged files (provided by app).\\n\\n!! Attachment\\n\\nFor `_canonical_uri`, it is recommended ''not'' to add the `file://` prefix because the web page does not support the `file://` prefix. Adding it will cause image attachments to fail to load when deployed to the web page blog.\\n\\n```tid\\n_canonical_uri: files/A File.pdf\\n```\\n\\n!! Link\\n\\nThe link needs to add the `file://` prefix so that you can click the link in the Taiji App to directly open the file. Without the prefix, Tiddlywiki cannot recognize it as an external file link and will think it is an internal Wiki link, resulting in failure to open. \\n\\n!!! Absolute `file://` link\\n\\nTidGi supports link and `_canonical_uri` to use `file://` prefix (or `open://`, both works the same), for example:\\n\\n```wikitext\\n[ext[Some External File Link with CJK character|file:///Users/linonetwo/Downloads/(OCRed)å¥–åŠ±çš„æƒ©ç½š (ï¼ˆç¾ï¼‰ç§‘æ©è‘—) (Z-Library).pdf]]\\n\\n[ext[An External Folder Link|file:///Users/linonetwo/Downloads/]]\\n```\\n\\nSo when you drag a file into TidGi app, `_canonical_uri` created by this plugin will also prefixed by `file://`.\\n\\nThis prefix looks like `file:///` because absolute paths usually start with `/`, plus two slashes for `file://`, so it looks like three slashes.\\n\\n!!! Relative `file://` link\\n\\nTidGi also supports relative path in your wiki folder. Starting with `file://` and directly followed by a folder name or file name is a relative path, e.g:\\n\\n```wikitext\\n[ext[PDF in the files folder|file://files/A File.pdf]]\\n\\n[ext[Open the tiddlers folder|file://tiddlers/]]\\n```\\n\\nYou can also use `. /` to explicitly indicate that this is a relative path:\\n\\n```wikitext\\n[ext[PDF in the files folder|file://./files/A File.pdf]]\\n\\n[ext[Open the tiddlers folder|file://./tiddlers/]]\\n```\\n\\n{{$:/plugins/linonetwo/tidgi-external-attachments/settings/en-GB-desc}}\\n\\n\\ntitle: $:/plugins/linonetwo/tidgi-external-attachments/readme/en\\n\\n!! ğŸŒŸ Core Features\\n\\nThis plugin intelligently manages large files as \\\"external attachments\\\", creating lightweight \\\"reference tiddlers\\\" to maintain Wiki performance.\\n\\n!! ğŸš€ Quick Start\\n\\n```wikitext\\n[Drag any file] â†’ [Preview info] â†’ [Click \\\"Import\\\"] â†’ âœ… Done!\\n```\\n* ğŸ’¡ Auto-creates `files` directory\\n* ğŸ”— Generates standardized relative paths\\n* ğŸŒ Fully compatible with web deployment\\n\\n!! ğŸ›  Feature Details\\n\\n!!! ğŸ–±ï¸ Drag-and-Drop Workflow\\n* âœ“ Drag files from any location (desktop/downloads)\\n* âœ“ Auto-generates preview (file size/type)\\n* âœ“ After confirmation:\\n  ** ğŸ—‚ï¸ Auto-moves to `files` directory (if enabled)\\n  ** ğŸ“ Creates reference tiddler with `_canonical_uri`\\n\\n!!! âš™ï¸ Path Management Rules\\n* â—»ï¸ Default Mode (Recommended):\\n  ** â†’ Automatically maintains `files` structure\\n  ** â†’ Always uses relative paths (`files/example.pdf`)\\n* â—»ï¸ Advanced Mode:\\n  ** â†’ Customizable storage directory\\n  ** â†’ Absolute paths for external files (manual maintenance)\\n\\n!! âš ï¸ Critical Notes\\n\\n!!! ğŸ”— Path Compatibility\\n* ğŸš« Absolute path files:\\n  ** ğŸ“Œ Local device access only\\n  ** ğŸŒ Unavailable for web deployment\\n  ** ğŸ”„ Cross-device sync fails\\n* âœ… Relative path files:\\n  ** ğŸ“¦ Supports full-platform sync\\n  ** ğŸš€ Plug-and-play deployment\\n\\n!!! â³ Operation Timing\\n* ğŸ•’ File movement occurs after \\\"Import\\\" click\\n* â†©ï¸ Canceling leaves no residual files\\n* ğŸ†• Auto-creates directory on first use\\n\\n!! ğŸ”— Extended Usage: External Links\\n\\n!!! ğŸ“ File Linking Best Practices\\n```wikitext\\n[ext[ğŸ“‚ Open Folder|file://./files/]]\\n[ext[ğŸ“„ View PDF|file://files/document.pdf]]\\n```\\n* ğŸ’¡ Must include `file://` protocol\\n* ğŸš« Not supported on web version\\n\\n!!! âŒ Common Mistakes\\n* Attachment fields (`_canonical_uri`):\\n  ** ğŸš« Should NOT contain `file://` \\n  ** âœ… Correct: `files/image.jpg`\\n* Body links:\\n  ** âœ… Must include `file://`\\n  ** Wrong: `[Link|files/file.pdf]`\\n\\n!! ğŸ§° Troubleshooting\\n\\n| Issue                | Solution                 |\\n|----------------------|--------------------------|\\n| Files not moving     | âœ”ï¸ Verify \\\"Import\\\" click  |\\n| Web version failure  | âœ”ï¸ Confirm using `files`  |\\n| Cross-device path fail| âœ”ï¸ Enable auto-move       |\\n\\n!! ğŸŒ Cross-Platform Support\\n\\n| Platform   | Attachments | Links     |\\n|------------|-------------|-----------|\\n| Windows    | âœ…           | âœ…         |\\n| macOS      | âœ…           | âœ…         |\\n| Linux      | âœ…           | âœ…         |\\n| Web        | âœ…           | âŒ         |\\n\\n(This version uses icon visualization for key operations, adds comparison tables for technical details, and adopts a more compact layout structure)\"},\"$:/plugins/linonetwo/tidgi-external-attachments/extlink/zh-Hans\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/extlink/zh-Hans\",\"text\":\"!! å¤–éƒ¨é“¾æ¥\\n\\nå¦‚æœä¸å¸Œæœ›ç”¨æ‹–å…¥æ–‡ä»¶çš„æ–¹å¼ç®¡ç†ï¼Œå¯ä»¥é€šè¿‡åŠ å¤–éƒ¨é“¾æ¥çš„æ–¹å¼å¼•ç”¨æ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥åœ¨å¤ªè®° App ä¸Šç‚¹å‡»é“¾æ¥ç›´æ¥æ‰“å¼€æ–‡ä»¶ã€‚\\n\\n!!! é“¾æ¥\\n\\né“¾æ¥éœ€è¦åŠ ä¸Š `file://` å‰ç¼€ï¼Œè¿™æ ·å¯ä»¥åœ¨å¤ªè®° App ä¸Šç‚¹å‡»é“¾æ¥ç›´æ¥æ‰“å¼€æ–‡ä»¶ã€‚ä¸åŠ å‰ç¼€æ—¶å¤ªå¾®æ— æ³•å°†å…¶è¯†åˆ«ä¸ºå¤–éƒ¨æ–‡ä»¶é“¾æ¥ï¼Œä¼šä»¥ä¸ºæ˜¯ä¸€ä¸ª Wiki å†…éƒ¨é“¾æ¥ï¼Œå¯¼è‡´æ— æ³•æ‰“å¼€ã€‚\\n\\n!!! ç»å¯¹è·¯å¾„ `file://` é“¾æ¥\\n\\nå¤ªè®°æ”¯æŒåœ¨é“¾æ¥å’Œ `_canonical_uri` å­—æ®µé‡Œä½¿ç”¨ `file://` å‰ç¼€ï¼ˆæˆ– `open://`ï¼Œä¸¤è€…æ•ˆæœç›¸åŒï¼‰ï¼š\\n\\n```wikitext\\n[ext[ä¸€ä¸ªå¸¦æœ‰ä¸­æ–‡å­—ç¬¦çš„æ–‡ä»¶ä¾‹å­|file:///Users/linonetwo/Downloads/(OCRed)å¥–åŠ±çš„æƒ©ç½š (ï¼ˆç¾ï¼‰ç§‘æ©è‘—) (Z-Library).pdf]]\\n\\n[ext[æ‰“å¼€å¤–éƒ¨æ–‡ä»¶å¤¹çš„é“¾æ¥|file:///Users/linonetwo/Downloads/]]\\n```\\n\\nå› æ­¤ï¼Œå½“ä½ æŠŠä¸€ä¸ªæ–‡ä»¶æ‹–å…¥å¤ªè®°æ—¶ï¼Œè¿™ä¸ªæ’ä»¶åˆ›å»ºçš„ `_canonical_uri` ä¹Ÿå°†ä»¥ `file://` ä¸ºå‰ç¼€ã€‚\\n\\nè¿™ä¸ªå‰ç¼€çœ‹èµ·æ¥åƒæ˜¯ `file:///`ï¼Œæ˜¯å› ä¸ºç»å¯¹è·¯å¾„ä¸€èˆ¬ä»¥ `/` å¼€å§‹ï¼Œå†åŠ ä¸Š `file://` çš„ä¸¤ä¸ªæ–œæ ï¼Œæ‰€ä»¥çœ‹èµ·æ¥åƒæ˜¯ä¸‰ä¸ªæ–œæ ã€‚\\n\\n!!! ç›¸å¯¹è·¯å¾„ `file://` é“¾æ¥\\n\\nå¤ªè®°è¿˜æ”¯æŒä½ çš„ Wiki æ–‡ä»¶å¤¹ä¸­çš„ç›¸å¯¹è·¯å¾„ï¼Œä»¥ `file://` å¼€å¤´å¹¶ç›´æ¥è·Ÿä¸Šæ–‡ä»¶å¤¹åæˆ–æ–‡ä»¶åï¼Œå°±æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¾‹å¦‚ï¼š\\n\\n```wikitext\\n[ext[PDF in the files folder|file://files/A File.pdf]]\\n\\n[ext[Open the tiddlers folder|file://tiddlers/]]\\n```\\n\\nä¹Ÿå¯ä»¥ç”¨ `./` æ˜æ˜¾åœ°è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼š\\n\\n```wikitext\\n[ext[PDF in the files folder|file://./files/A File.pdf]]\\n\\n[ext[Open the tiddlers folder|file://./tiddlers/]]\\n```\\n\\n!!! é“¾æ¥å’Œé™„ä»¶çš„åŒºåˆ«\\n\\né™„ä»¶å³æ˜¯é€šè¿‡ `_canonical_uri` å­—æ®µå¼•ç”¨çš„å¤–éƒ¨æ–‡ä»¶ï¼Œå¯¹äºé™„ä»¶é‡Œçš„åœ°å€ï¼Œå»ºè®®''ä¸''åŠ  `file://` å‰ç¼€ï¼Œå› ä¸ºç½‘é¡µç«¯ä¸æ”¯æŒ `file://` å‰ç¼€ï¼ŒåŠ äº†ä¼šå¯¼è‡´å›¾ç‰‡é™„ä»¶åœ¨éƒ¨ç½²åˆ°ç½‘é¡µç«¯åšå®¢æ—¶æ— æ³•åŠ è½½ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¸å¸¦ `file://` å‰ç¼€çš„å¥½çš„ä¾‹å­ï¼š\\n\\n```tid\\n_canonical_uri: files/A File.pdf\\n```\\n\\nè€Œå¤–éƒ¨é“¾æ¥åˆ™æ˜¯ç›´æ¥åœ¨æ­£æ–‡é‡ŒåŠ ä¸Šçš„é“¾æ¥ï¼Œè¿™ç§é“¾æ¥éœ€è¦åŠ ä¸Š `file://` å‰ç¼€ï¼Œä»¥ä¾¿åœ¨å¤ªè®° App ä¸Šç‚¹å‡»é“¾æ¥ç›´æ¥æ‰“å¼€æ–‡ä»¶ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå¸¦ `file://` å‰ç¼€çš„å¥½çš„ä¾‹å­ï¼š\\n\\n```wikitext\\n[ext[A File|file://./files/A File.pdf]]\\n```\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/extlink\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/extlink\",\"text\":\"<$list filter=\\\"[[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]]\\\" variable=\\\"lang\\\">\\n\\n\\t<$list filter=\\\"[<lang>search[zh]]\\\">\\n\\n\\t\\t{{$:/plugins/linonetwo/tidgi-external-attachments/extlink/zh-Hans}}\\n\\n\\t</$list>\\n\\n\\t<$list filter=\\\"[<lang>!search[zh]]\\\">\\n\\n\\t\\t{{$:/plugins/linonetwo/tidgi-external-attachments/extlink/en-GB}}\\n\\n\\t</$list>\\n\\n</$list>\"},\"$:/plugins/linonetwo/tidgi-external-attachments/readme/en-GB\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/readme/en-GB\",\"text\":\"!! ğŸŒŸ Core Features\\n\\nThis plugin intelligently manages large files as \\\"external attachments\\\", creating lightweight \\\"reference tiddlers\\\" to maintain Wiki performance.\\n\\n!! ğŸš€ Quick Start\\n\\n```wikitext\\n[Drag any file] â†’ [Preview info] â†’ [Click \\\"Import\\\"] â†’ âœ… Done!\\n```\\n* ğŸ’¡ Auto-creates `files` directory\\n* ğŸ”— Generates standardized relative paths\\n* ğŸŒ Fully compatible with web deployment\\n\\n!! ğŸ›  Feature Details\\n\\n!!! ğŸ–±ï¸ Drag-and-Drop Workflow\\n* âœ“ Drag files from any location (desktop/downloads)\\n* âœ“ Auto-generates preview (tiddler fields/file location)\\n* âœ“ After confirmation:\\n** ğŸ—‚ï¸ Auto-moves to `files` directory (if enabled)\\n** ğŸ“ Creates reference tiddler with `_canonical_uri`\\n* âœ“ Intelligently detects files from `./files` directory:\\n** ğŸ¯ References in-place without moving\\n** ğŸ“‹ Perfect for batch imports with Tiddler Commander field editing\\n\\n!!! ğŸ—‘ï¸ Deletion Management\\n* âœ“ Automatically handles external files when deleting tiddlers\\n* âœ“ One-click move associated files to trash\\n* âœ“ Keeps file system clean and organized\\n* âœ“ Works with TidGi's automatic Git backups for complete safety\\n\\n!!! âš™ï¸ Path Management Rules\\n* â—»ï¸ Default Mode (Recommended):\\n** â†’ Automatically maintains `files` structure\\n** â†’ Always uses relative paths (`files/example.pdf`)\\n* â—»ï¸ Advanced Mode (if modified the [[settings|$:/plugins/linonetwo/tidgi-external-attachments/settings]]):\\n** â†’ Customizable storage directory\\n** â†’ Absolute paths for external files (manual maintenance)\\n\\n!!! ğŸ·ï¸ Sub-Wiki Routing Support\\n* âœ“ Automatically routes files to correct sub-wiki based on tiddler tags\\n* âœ“ Files saved to matched sub-wiki's `files` directory\\n* âœ“ Supports the following routing rules (by priority):\\n** ğŸ¯ Direct tag matching: Tiddler tags match sub-wiki's tagNames\\n** ğŸŒ³ Tag tree matching: Recursive tag hierarchy when includeTagTree enabled\\n** ğŸ” Custom filter: Match using fileSystemPathFilter expressions\\n* ğŸ’¡ Usage steps:\\n** â†’ Configure tagNames in TidGi's sub-wiki settings\\n** â†’ Example: Set tagNames to `[\\\"ProjectA\\\"]` for \\\"Project A\\\" sub-wiki\\n** â†’ When importing a file, add tag `ProjectA` in the import dialog\\n** â†’ After clicking import, the file automatically moves to \\\"Project A\\\" sub-wiki's files folder\\n** â†’ The tiddler is also automatically saved to \\\"Project A\\\" sub-wiki\\n* ğŸ”„ Automatic tag change sync:\\n** â†’ When you change tags on an existing attachment tiddler, the file automatically moves to the new sub-wiki\\n** â†’ `_canonical_uri` path is automatically updated\\n** â†’ Tiddler and file always stay in sync\\n* âš ï¸ Routing notes:\\n** â†’ Falls back to main wiki's files directory when no sub-wiki matches\\n** â†’ Uses same logic as FileSystemAdaptor\\n** â†’ Ensure sub-wikis have tagNames or fileSystemPathFilter configured\\n\\n!! âš ï¸ Critical Notes\\n\\n!!! ğŸ”— Path Compatibility\\n* ğŸš« Absolute path files:\\n** ğŸ“Œ Local device access only\\n** ğŸŒ Unavailable for web deployment\\n** ğŸ”„ Cross-device sync fails\\n* âœ… Relative path files:\\n** ğŸ“¦ Supports full-platform sync\\n** ğŸš€ Plug-and-play deployment\\n\\n!!! â³ Operation Timing\\n* ğŸ•’ File movement occurs after \\\"Import\\\" click\\n* â†©ï¸ Canceling leaves no residual files\\n* ğŸ†• Auto-creates directory on first use\\n* ğŸ—‘ï¸ File deletion occurs when tiddler is deleted (if enabled)\\n\\n!! ğŸ”— Extended Usage: External Links\\n\\n[[ğŸ“„ View more external link examples|$:/plugins/linonetwo/tidgi-external-attachments/extlink]]\\n\\n!!! ğŸ“ File Linking Best Practices\\n```wikitext\\n[ext[ğŸ“‚ Open Folder|file://./files/]]\\n[ext[ğŸ“„ View PDF|file://files/document.pdf]]\\n```\\n* ğŸ’¡ Must include `file://` protocol\\n* ğŸš« Not supported on web version\\n\\n!!! âŒ Common Mistakes\\n* Attachment fields (`_canonical_uri`):\\n** ğŸš« relative paths Should NOT contain `file://` or `./` prefix\\n** âœ… Correct: `files/image.jpg`\\n** File links or absolute paths should be prefixed with `file://` (and usually you only use relative paths for attachment)\\n* Body links:\\n** âœ… Must include `file://`\\n** Wrong: `[Link|files/file.pdf]`\\n\\n!! ğŸ§° Troubleshooting\\n\\n| Issue                | Solution                 |\\n| Files not moving     | âœ”ï¸ Verify \\\"Import\\\" click  |\\n| Web version failure  | âœ”ï¸ Confirm using `files`  |\\n| Cross-device path fail| âœ”ï¸ Enable auto-move       |\\n| Files remain after deletion | âœ”ï¸ Verify \\\"Move to trash\\\" is enabled |\\n| Need batch import & edit | âœ”ï¸ Organize in `files` directory first |\\n\\n!! ğŸŒ Cross-Platform Support\\n\\nClose this plugin, and the dragged content will be stored directly as tiddlers, which is the most compatible way but will significantly increase the file size and slow down the startup speed. The following is a compatibility chart.\\n\\n| Platform   | Attachments | Links     | As Tiddler |\\n| Windows    | âœ…           | âœ…        | âœ…        |\\n| macOS      | âœ…           | âœ…        | âœ…        |\\n| Linux      | âœ…           | âœ…        | âœ…        |\\n| Web        | âœ…           | âŒ        | âœ…        |\\n| Mobile     | â“           | âŒ        | âœ…        |\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/readme/zh-Hans\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/readme/zh-Hans\",\"text\":\"!! ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½\\n\\næœ¬æ’ä»¶å®ç°å°†å¤§æ–‡ä»¶ä½œä¸ºã€Œå¤–éƒ¨é™„ä»¶ã€æ™ºèƒ½ç®¡ç†ï¼Œç”Ÿæˆè½»é‡çº§ã€Œå¼•ç”¨æ¡ç›®ã€ï¼Œä¿æŒ Wiki é«˜æ•ˆè¿è¡Œã€‚\\n\\n!! ğŸš€ å¿«é€Ÿå…¥é—¨\\n\\n```wikitext\\n[æ‹–å…¥ä»»æ„æ–‡ä»¶] â†’ [é¢„è§ˆä¿¡æ¯] â†’ [ç‚¹å‡»\\\"å¯¼å…¥\\\"] â†’ âœ… å®Œæˆï¼\\n```\\n* ğŸ’¡ è‡ªåŠ¨åˆ›å»º `files` ç›®å½•\\n* ğŸ”— ç”Ÿæˆè§„èŒƒç›¸å¯¹è·¯å¾„\\n* ğŸŒ å®Œç¾å…¼å®¹ç½‘é¡µéƒ¨ç½²\\n\\n!! ğŸ›  åŠŸèƒ½è¯¦è§£\\n\\n!!! ğŸ–±ï¸ æ‹–æ”¾å¯¼å…¥æµç¨‹\\n* âœ“ ä»»æ„ä½ç½®æ‹–å…¥æ–‡ä»¶ï¼ˆæ¡Œé¢/ä¸‹è½½ç›®å½•ç­‰ï¼‰\\n* âœ“ è‡ªåŠ¨ç”Ÿæˆé¢„è§ˆä¿¡æ¯ï¼ˆæ¡ç›®å­—æ®µ/æ–‡ä»¶ç§»åŠ¨ä½ç½®ç­‰ï¼‰\\n* âœ“ ç‚¹å‡»ç¡®è®¤åï¼š\\n** ğŸ—‚ï¸ è‡ªåŠ¨ç§»åŠ¨è‡³ `files` ç›®å½•ï¼ˆè‹¥å¼€å¯ï¼‰\\n** ğŸ“ åˆ›å»ºå¸¦ `_canonical_uri` çš„å¼•ç”¨æ¡ç›®\\n* âœ“ æ™ºèƒ½è¯†åˆ« `./files` ç›®å½•ä¸‹æ–‡ä»¶ï¼š\\n** ğŸ¯ ç›´æ¥å¼•ç”¨åŸä½ç½®ï¼Œä¸ç§»åŠ¨æ–‡ä»¶\\n** ğŸ“‹ æ–¹ä¾¿æ‰¹é‡å¯¼å…¥åç”¨ Tiddler Commander ç¼–è¾‘å­—æ®µ\\n\\n!!! ğŸ—‘ï¸ åˆ é™¤ç®¡ç†åŠŸèƒ½\\n* âœ“ åˆ é™¤æ¡ç›®æ—¶è‡ªåŠ¨å¤„ç†å¤–éƒ¨æ–‡ä»¶\\n* âœ“ ä¸€é”®å°†å…³è”æ–‡ä»¶ç§»è‡³å›æ”¶ç«™\\n* âœ“ ä¿æŒæ–‡ä»¶ç³»ç»Ÿæ•´æ´æœ‰åº\\n* âœ“ é…åˆ TidGi è‡ªåŠ¨ Git å¤‡ä»½ï¼Œæä¾›å®Œæ•´å®‰å…¨ä¿éšœ\\n\\n!!! âš™ï¸ è·¯å¾„ç®¡ç†è§„åˆ™\\n\\n* â—»ï¸ é»˜è®¤æ¨¡å¼ï¼ˆæ¨èï¼‰ï¼š\\n** â†’ è‡ªåŠ¨ç»´æŠ¤ `files` ç›®å½•ç»“æ„\\n** â†’ å§‹ç»ˆä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆ`files/example.pdf`ï¼‰\\n* â—»ï¸ é«˜çº§æ¨¡å¼ï¼ˆå¦‚æœä¿®æ”¹äº†[[é…ç½®|$:/plugins/linonetwo/tidgi-external-attachments/settings]]ï¼‰ï¼š\\n** â†’ å¯è‡ªå®šä¹‰å­˜å‚¨ç›®å½•\\n** â†’ Wikiå¤–æ–‡ä»¶ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ˆéœ€æ‰‹åŠ¨ç»´æŠ¤ï¼‰\\n\\n!!! ğŸ·ï¸ å­ Wiki è·¯ç”±æ”¯æŒ\\n\\n* âœ“ æ ¹æ®æ¡ç›®æ ‡ç­¾è‡ªåŠ¨è·¯ç”±åˆ°å¯¹åº”å­ Wiki\\n* âœ“ æ–‡ä»¶è‡ªåŠ¨ä¿å­˜åˆ°åŒ¹é…å­ Wiki çš„ `files` ç›®å½•\\n* âœ“ æ”¯æŒä»¥ä¸‹è·¯ç”±è§„åˆ™ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰ï¼š\\n** ğŸ¯ ç›´æ¥æ ‡ç­¾åŒ¹é…ï¼šæ¡ç›®æ ‡ç­¾åŒ¹é…å­ Wiki çš„ tagNames\\n** ğŸŒ³ æ ‡ç­¾æ ‘åŒ¹é…ï¼šå¯ç”¨ includeTagTree æ—¶æ”¯æŒé€’å½’æ ‡ç­¾å±‚çº§\\n** ğŸ” è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼šä½¿ç”¨ fileSystemPathFilter è¡¨è¾¾å¼åŒ¹é…\\n* ğŸ’¡ ä½¿ç”¨æ­¥éª¤ï¼š\\n** â†’ åœ¨ TidGi è®¾ç½®ä¸­é…ç½®å­ Wiki çš„ tagNames\\n** â†’ ç¤ºä¾‹ï¼šå­ Wikiã€Œé¡¹ç›®Aã€è®¾ç½® tagNames ä¸º `[\\\"ProjectA\\\"]`\\n** â†’ å¯¼å…¥æ–‡ä»¶æ—¶ï¼Œåœ¨å¯¼å…¥å¯¹è¯æ¡†ä¸­æ·»åŠ æ ‡ç­¾ `ProjectA`\\n** â†’ ç‚¹å‡»å¯¼å…¥åï¼Œæ–‡ä»¶è‡ªåŠ¨ç§»åŠ¨åˆ°ã€Œé¡¹ç›®Aã€å­ Wiki çš„ files æ–‡ä»¶å¤¹\\n** â†’ æ¡ç›®ä¹Ÿä¼šè‡ªåŠ¨ä¿å­˜åˆ°ã€Œé¡¹ç›®Aã€å­ Wiki\\n* ğŸ”„ æ ‡ç­¾å˜æ›´è‡ªåŠ¨åŒæ­¥ï¼š\\n** â†’ ä¿®æ”¹å·²æœ‰é™„ä»¶æ¡ç›®çš„æ ‡ç­¾æ—¶ï¼Œæ–‡ä»¶ä¼šè‡ªåŠ¨ç§»åŠ¨åˆ°æ–°çš„å­ Wiki\\n** â†’ `_canonical_uri` è·¯å¾„ä¼šè‡ªåŠ¨æ›´æ–°\\n** â†’ æ¡ç›®å’Œæ–‡ä»¶å§‹ç»ˆä¿æŒåŒæ­¥\\n* âš ï¸ è·¯ç”±æ³¨æ„äº‹é¡¹ï¼š\\n** â†’ æœªåŒ¹é…åˆ°å­ Wiki æ—¶ï¼Œé»˜è®¤ä¿å­˜åˆ°ä¸» Wiki çš„ files ç›®å½•\\n** â†’ å­ Wiki è·¯ç”±ä½¿ç”¨ä¸ FileSystemAdaptor ç›¸åŒçš„é€»è¾‘\\n** â†’ ç¡®ä¿å­ Wiki å·²æ­£ç¡®é…ç½® tagNames æˆ– fileSystemPathFilter\\n\\n!! âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹\\n\\n!!! ğŸ”— è·¯å¾„å…¼å®¹æ€§\\n* ğŸš« ç»å¯¹è·¯å¾„æ–‡ä»¶ï¼š\\n** ğŸ“Œ ä»…é™æœ¬åœ°è®¾å¤‡è®¿é—®\\n** ğŸŒ ç½‘é¡µéƒ¨ç½²ä¸å¯ç”¨\\n** ğŸ”„ è·¨è®¾å¤‡åŒæ­¥å¤±æ•ˆ\\n* âœ… ç›¸å¯¹è·¯å¾„æ–‡ä»¶ï¼š\\n** ğŸ“¦ æ”¯æŒå…¨å¹³å°åŒæ­¥\\n** ğŸš€ å³æ’å³ç”¨å¼éƒ¨ç½²\\n\\n!!! â³ æ“ä½œæ—¶æœº\\n* ğŸ•’ æ–‡ä»¶ç§»åŠ¨å‘ç”Ÿåœ¨ã€Œå¯¼å…¥ã€æŒ‰é’®ç‚¹å‡»å\\n* â†©ï¸ å–æ¶ˆæ“ä½œä¸ä¼šäº§ç”Ÿæ®‹ç•™æ–‡ä»¶\\n* ğŸ†• é¦–æ¬¡ä½¿ç”¨è‡ªåŠ¨åˆ›å»ºç›®å½•ç»“æ„\\n* ğŸ—‘ï¸ æ–‡ä»¶åˆ é™¤å‘ç”Ÿåœ¨æ¡ç›®åˆ é™¤æ—¶ï¼ˆè‹¥å¼€å¯ï¼‰\\n\\n!! ğŸ”— æ‰©å±•åº”ç”¨ï¼šå¤–éƒ¨é“¾æ¥æŠ€å·§\\n\\n[[ğŸ“„ æŸ¥çœ‹æ›´å¤šå¤–éƒ¨é“¾æ¥ç¤ºä¾‹|$:/plugins/linonetwo/tidgi-external-attachments/extlink]]\\n\\n!!! ğŸ“ æ–‡ä»¶é“¾æ¥æœ€ä½³å®è·µ\\n```wikitext\\n[ext[ğŸ“‚ æ‰“å¼€æ–‡ä»¶å¤¹|file://./files/]]\\n[ext[ğŸ“„ æŸ¥çœ‹PDF|file://files/æ–‡æ¡£.pdf]]\\n```\\n* ğŸ’¡ å¿…é¡»æ·»åŠ  `file://` åè®®å¤´\\n* ğŸš« ç½‘é¡µç«¯ä¸æ”¯æŒæ­¤åè®®\\n\\n!!! âŒ å¸¸è§è¯¯åŒº\\n* é™„ä»¶å­—æ®µï¼ˆ`_canonical_uri`ï¼‰ï¼š\\n** ğŸš« ç›¸å¯¹è·¯å¾„ä¸åº”åŒ…å« `file://` å‰ç¼€æˆ– `./` å‰ç¼€\\n** âœ… æ­£ç¡®ç¤ºä¾‹ï¼š`_canonical_uri: files/å›¾ç‰‡.jpg`\\n** æ–‡ä»¶é“¾æ¥æˆ–ç»å¯¹è·¯å¾„æ‰éœ€è¦åŠ  `file://` å‰ç¼€ï¼ˆè€Œä¸€èˆ¬ä½ åªç”¨å¾—ç€é™„ä»¶å­—æ®µé‡Œçš„ç›¸å¯¹è·¯å¾„ï¼‰\\n* æ­£æ–‡é“¾æ¥ï¼š\\n** âœ… å¿…é¡»åŒ…å« `file://` å‰ç¼€\\n** é”™è¯¯ç¤ºä¾‹ï¼š`[ext[é“¾æ¥|files/æ–‡ä»¶.pdf]]`\\n\\n!! ğŸ§° æ•…éšœæ’æŸ¥\\n\\n| ç°è±¡               | è§£å†³æ–¹æ¡ˆ                |\\n| æ–‡ä»¶æœªç§»åŠ¨          | âœ”ï¸ æ£€æŸ¥æ˜¯å¦ç‚¹å‡»\\\"å¯¼å…¥\\\"æŒ‰é’® |\\n| ç½‘é¡µç‰ˆåŠ è½½å¤±è´¥      | âœ”ï¸ ç¡®è®¤ä½¿ç”¨é»˜è®¤`files`ç›®å½• |\\n| è·¨è®¾å¤‡è·¯å¾„å¤±æ•ˆ      | âœ”ï¸ å¼€å¯è‡ªåŠ¨ç§»åŠ¨åŠŸèƒ½       |\\n| åˆ é™¤æ¡ç›®åæ–‡ä»¶ä»å­˜åœ¨ | âœ”ï¸ ç¡®è®¤å·²å¼€å¯\\\"åˆ é™¤æ—¶ç§»è‡³å›æ”¶ç«™\\\" |\\n| éœ€è¦æ‰¹é‡å¯¼å…¥ç¼–è¾‘    | âœ”ï¸ å…ˆæ•´ç†åˆ°`files`ç›®å½•åæ‹–å…¥ |\\n\\n!! ğŸŒ è·¨å¹³å°æ”¯æŒ\\n\\nå…³é—­æ­¤æ’ä»¶æ—¶ï¼Œæ‹–å…¥çš„å†…å®¹ä¼šç›´æ¥ä½œä¸ºæ¡ç›®å­˜å…¥ï¼Œå…¼å®¹æ€§æœ€å¥½ï¼Œä½†ä¼šå¤§å¹…å¢å¤§å¤ªå¾®æ–‡ä»¶ä½“ç§¯ï¼Œä¸”ä¼šä¸¥é‡æ‹–æ…¢å¯åŠ¨é€Ÿåº¦ã€‚ä»¥ä¸‹æ˜¯å…¼å®¹æ€§ç¤ºæ„å›¾ã€‚\\n\\n| å¹³å°      | é™„ä»¶æ”¯æŒ | é“¾æ¥æ”¯æŒ | ä½œä¸ºæ¡ç›® |\\n| Windows  | âœ…       | âœ…      | âœ…      |\\n| macOS    | âœ…       | âœ…      | âœ…      |\\n| Linux    | âœ…       | âœ…      | âœ…      |\\n| ç½‘é¡µéƒ¨ç½²  | âœ…       | âŒ      | âœ…      |\\n| ç§»åŠ¨ç«¯    | â“       | âŒ      | âœ…      |\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/readme\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/readme\",\"text\":\"<$list filter=\\\"[[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]]\\\" variable=\\\"lang\\\">\\n\\n\\t<$list filter=\\\"[<lang>search[zh]]\\\">\\n\\n\\t\\t{{$:/plugins/linonetwo/tidgi-external-attachments/readme/zh-Hans}}\\n\\n\\t</$list>\\n\\n\\t<$list filter=\\\"[<lang>!search[zh]]\\\">\\n\\n\\t\\t{{$:/plugins/linonetwo/tidgi-external-attachments/readme/en-GB}}\\n\\n\\t</$list>\\n\\n</$list>\"},\"$:/plugins/linonetwo/tidgi-external-attachments/settings/settings-caption\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/settings/settings-caption\",\"text\":\"\\\\whitespace trim\\n\\n<$list filter=\\\"[[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]]\\\" variable=\\\"lang\\\">\\n\\t<$list filter=\\\"[<lang>search[zh]]\\\">\\n\\t\\t<$transclude tiddler=\\\"$:/plugins/linonetwo/tidgi-external-attachments/settings/zh-Hans\\\" field=\\\"caption\\\" />\\n\\t</$list>\\n\\n\\t<$list filter=\\\"[<lang>!search[zh]]\\\">\\n\\t\\t<$transclude tiddler=\\\"$:/plugins/linonetwo/tidgi-external-attachments/settings/en-GB\\\" field=\\\"caption\\\" />\\n\\t</$list>\\n</$list>\"},\"$:/plugins/linonetwo/tidgi-external-attachments/settings/en-GB\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/settings/en-GB\",\"caption\":\"ExtAttach\",\"text\":\"!! Configs\\n\\n<$checkbox tiddler=\\\"$:/config/ExternalAttachments/Enable\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\"> <$link to=\\\"$:/config/ExternalAttachments/Enable\\\">Enable importing binary files as external attachments</$link> </$checkbox>\\n\\n<$checkbox tiddler=\\\"$:/config/ExternalAttachments/EnableForImage\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"yes\\\"> <$link to=\\\"$:/config/ExternalAttachments/EnableForImage\\\">Importing images as attachments</$link> </$checkbox> If disabled, images will be imported as internal image tiddlers, which increases file size and slows down startup, but improves compatibility.\\n\\n<$checkbox tiddler=\\\"$:/config/ExternalAttachments/MoveToWikiFolder\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\"> <$link to=\\\"$:/config/ExternalAttachments/MoveToWikiFolder\\\">Automatically move imported files to the Wiki folder</$link> </$checkbox>\\n\\n<$checkbox tiddler=\\\"$:/config/ExternalAttachments/MoveToTrash\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\"> <$link to=\\\"$:/config/ExternalAttachments/MoveToTrash\\\">Move associated external files to trash when deleting tiddlers</$link> </$checkbox>\\n\\n<%if [{$:/config/ExternalAttachments/MoveToWikiFolder}match[yes]] %>\\n\\n  <$edit-text tiddler=\\\"$:/config/ExternalAttachments/WikiFolderToMove\\\" tabindex=-1 focus=false cancelPopups=\\\"yes\\\" fileDrop=no tag=\\\"input\\\" /> Automatically move files to this folder inside the Wiki folder (suggested to keep using `files`).\\n\\n<% else %>\\n\\n  <$checkbox tiddler=\\\"$:/config/ExternalAttachments/UseAbsoluteForNonDescendents\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\">\\n    <$link to=\\\"$:/config/ExternalAttachments/UseAbsoluteForNonDescendents\\\">\\n      Use absolute paths for attachments ''outside'' the Wiki folder (anywhere on the computer)\\n    </$link>\\n  </$checkbox>\\n  <$checkbox tiddler=\\\"$:/config/ExternalAttachments/UseAbsoluteForDescendents\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\"> <$link to=\\\"$:/config/ExternalAttachments/UseAbsoluteForDescendents\\\">Use absolute paths for descendent attachments (inside wiki folder)</$link> </$checkbox>\\n\\n<% endif %>\\n\\n\\n!! Recommended Configuration\\n\\n* Keep \\\"Automatically move files to Wiki folder\\\" enabled (default)\\n* Retain the default storage directory as `files`\\n* Always disable \\\"Use absolute paths for files within Wiki\\\"\\n* Default to moving external files to trash when deleting tiddlers to simplify external file management, as TidGi's automatic git backups can restore files at any time.\\n\\nRead more in the [[plugin readme|$:/plugins/linonetwo/tidgi-external-attachments/readme]].\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/settings/zh-Hans\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/settings/zh-Hans\",\"caption\":\"å¤–éƒ¨é™„ä»¶\",\"text\":\"!! é…ç½®é¡¹\\n\\n<$checkbox tiddler=\\\"$:/config/ExternalAttachments/Enable\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\"> <$link to=\\\"$:/config/ExternalAttachments/Enable\\\" >å¯ç”¨æœ¬æ’ä»¶ï¼Œå°†æ‹–å…¥çš„äºŒè¿›åˆ¶æ–‡ä»¶éƒ½ä½œä¸ºã€Œå¼•ç”¨æ¡ç›®ã€å¯¼å…¥</$link> </$checkbox>\\n\\n<$checkbox tiddler=\\\"$:/config/ExternalAttachments/EnableForImage\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"yes\\\"> <$link to=\\\"$:/config/ExternalAttachments/EnableForImage\\\">åœ¨æ‹–å…¥å›¾ç‰‡æ—¶ä¹Ÿå¯¼å…¥ä¸ºé™„ä»¶</$link> </$checkbox> å¦‚æœå…³é—­ï¼Œåˆ™å›¾ç‰‡ä¼šè¢«ç›´æ¥å¯¼å…¥ä¸ºå†…ç½®çš„å›¾ç‰‡æ¡ç›®è€Œä¸æ˜¯é™„ä»¶ï¼Œå¢å¤§æ–‡ä»¶ä½“ç§¯æ‹–æ…¢å¯åŠ¨é€Ÿåº¦ï¼Œä½†æé«˜å…¼å®¹æ€§ã€‚\\n\\n<$checkbox tiddler=\\\"$:/config/ExternalAttachments/MoveToWikiFolder\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\"> <$link to=\\\"$:/config/ExternalAttachments/MoveToWikiFolder\\\">è‡ªåŠ¨å°†æ‹–å…¥çš„æ–‡ä»¶ç§»åŠ¨åˆ° Wiki æ–‡ä»¶å¤¹å†…</$link> </$checkbox>\\n\\n<$checkbox tiddler=\\\"$:/config/ExternalAttachments/MoveToTrash\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"yes\\\"> <$link to=\\\"$:/config/ExternalAttachments/MoveToTrash\\\">åˆ é™¤æ¡ç›®æ—¶å°†å…³è”çš„å¤–éƒ¨æ–‡ä»¶ç§»åŠ¨åˆ°å›æ”¶ç«™</$link> </$checkbox>\\n\\n<%if [{$:/config/ExternalAttachments/MoveToWikiFolder}match[yes]] %>\\n\\n  <$edit-text tiddler=\\\"$:/config/ExternalAttachments/WikiFolderToMove\\\" tabindex=-1 focus=false cancelPopups=\\\"yes\\\" fileDrop=no tag=\\\"input\\\" /> è‡ªåŠ¨ç§»åŠ¨æ–‡ä»¶åˆ° Wiki æ–‡ä»¶å¤¹é‡Œçš„è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œï¼ˆå»ºè®®ä¿æŒç”¨ `files`ï¼‰ã€‚\\n\\n<% else %>\\n\\n  <$checkbox tiddler=\\\"$:/config/ExternalAttachments/UseAbsoluteForNonDescendents\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\">\\n    <$link to=\\\"$:/config/ExternalAttachments/UseAbsoluteForNonDescendents\\\">\\n      ä¸º Wiki æ–‡ä»¶å¤¹''å¤–''çš„é™„ä»¶ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ˆæ–‡ä»¶åœ¨ç”µè„‘ä¸Šçš„ä»»ä½•åœ°æ–¹ï¼‰\\n    </$link>\\n  </$checkbox>\\n  <$checkbox tiddler=\\\"$:/config/ExternalAttachments/UseAbsoluteForDescendents\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\"> <$link to=\\\"$:/config/ExternalAttachments/UseAbsoluteForDescendents\\\">ä½¿ç”¨ç»å¯¹è·¯å¾„å¼•ç”¨ Wiki æ–‡ä»¶å¤¹''å†…''çš„æ–‡ä»¶ï¼ˆä¸æ¨èå¼€å¯ï¼‰</$link> </$checkbox>\\n\\n<% endif %>\\n\\n\\n!! æ¨èé…ç½®\\n\\n* ä¿æŒã€Œè‡ªåŠ¨ç§»åŠ¨æ–‡ä»¶åˆ° Wiki æ–‡ä»¶å¤¹å†…ã€å¼€å¯ï¼ˆé»˜è®¤å¯ç”¨ï¼‰\\n* ä¿ç•™é»˜è®¤å­˜å‚¨ç›®å½•ä¸º `files` \\n* å§‹ç»ˆå…³é—­ã€Œä¸º Wiki å†…æ–‡ä»¶ä½¿ç”¨ç»å¯¹è·¯å¾„ã€\\n* é»˜è®¤å¼€å¯ã€Œåˆ é™¤æ¡ç›®æ—¶ç§»åŠ¨å…³è”å¤–éƒ¨æ–‡ä»¶åˆ°å›æ”¶ç«™ã€åŠŸèƒ½ï¼Œä»¥ç®€åŒ–å¤–éƒ¨åº”ç”¨ç®¡ç†ï¼Œåæ­£å¤ªè®°æœ‰è‡ªåŠ¨gitå¤‡ä»½å¯ä»¥éšæ—¶å›æ¡£\\n\\né˜…è¯»[[æ’ä»¶è¯´æ˜|$:/plugins/linonetwo/tidgi-external-attachments/readme]]äº†è§£æ›´å¤šä¿¡æ¯ã€‚\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/settings\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/settings\",\"tags\":\"$:/tags/ControlPanel/SettingsTab\",\"caption\":\"{{$:/plugins/linonetwo/tidgi-external-attachments/settings/settings-caption}}\",\"text\":\"<$list filter=\\\"[[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]]\\\" variable=\\\"lang\\\">\\n\\n\\t<$list filter=\\\"[<lang>search[zh]]\\\">\\n\\t\\n\\t\\t{{$:/plugins/linonetwo/tidgi-external-attachments/settings/zh-Hans}}\\n\\n\\t</$list>\\n\\n\\t<$list filter=\\\"[<lang>!search[zh]]\\\">\\n\\t\\n\\t\\t{{$:/plugins/linonetwo/tidgi-external-attachments/settings/en-GB}}\\n\\n\\t</$list>\\n\\n</$list>\"},\"$:/plugins/linonetwo/tidgi-external-attachments/tree\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/tree\",\"caption\":\"{{$:/language/SideBar/Explorer/Caption}}\",\"text\":\"<<tree \\\"$:/plugins/linonetwo/tidgi-external-attachments/\\\">>\\n\"},\"$:/plugins/linonetwo/tidgi-external-attachments/startup.js\":{\"title\":\"$:/plugins/linonetwo/tidgi-external-attachments/startup.js\",\"type\":\"application/javascript\",\"module-type\":\"startup\",\"Modern.TiddlyDev#Origin\":\"startup.ts\",\"text\":\"\\\"use strict\\\";async function getWorkspacesWithRouting(t){if(!window.service?.workspace)return[];const i=$tw.utils;if(!i.isWikiWorkspaceWithRouting||!i.workspaceSorter)return console.error(\\\"Routing utilities not available. Make sure watch-filesystem-adaptor plugin is loaded.\\\"),[];try{return(await window.service.workspace.getWorkspacesAsList()).filter(e=>i.isWikiWorkspaceWithRouting(e,t)).sort(i.workspaceSorter)}catch(e){return console.error(\\\"Failed to get workspaces with routing:\\\",e),[]}}function matchTiddlerToWorkspace(e,t,i,o,n){var r=$tw.utils;if(r.matchTiddlerToWorkspace)return r.matchTiddlerToWorkspace(e,t,i,o,n);console.error(\\\"matchTiddlerToWorkspace not available in $tw.utils\\\")}function unifyWindowsPathAsUnixPath(e){return e=\\\"//\\\"===(e=\\\"/\\\"!==(e=e.replaceAll(\\\"\\\\\\\\\\\",\\\"/\\\")).charAt(0)?\\\"/\\\"+e:e).substring(0,2)?e.substring(1):e}function makePathRelative(e,t,i={}){(i.isWindows||$tw.platform.isWindows)&&(e=unifyWindowsPathAsUnixPath(e),t=unifyWindowsPathAsUnixPath(t));const o=e.split(\\\"/\\\");var n=t.split(\\\"/\\\"),r=[];$tw.platform.isMac&&\\\"private\\\"===o[1]&&o.splice(1,1),$tw.utils.each(o,function(e,t){o[t]=encodeURI(e)});let a=0;for(;a<o.length&&a<n.length&&o[a]===n[a];)a+=1;if(1===a||i.useAbsoluteForNonDescendents&&a<n.length||i.useAbsoluteForDescendents&&a===n.length)return\\\"file://\\\"+e;let s=0;for(s=a;s<n.length-1;s++)r.push(\\\"..\\\");for(s=a;s<o.length;s++)r.push(o[s]);return r.join(\\\"/\\\")}function joinPaths(...e){let t=e.join(\\\"/\\\");return t=$tw.platform.isWindows?t.replaceAll(\\\"/\\\",\\\"\\\\\\\\\\\"):t}function basePath(e){return $tw.platform.isWindows?e.split(\\\"\\\\\\\\\\\").pop()||\\\"\\\":e.split(\\\"/\\\").pop()||\\\"\\\"}var ENABLE_EXTERNAL_ATTACHMENTS_TITLE=\\\"$:/config/ExternalAttachments/Enable\\\",ENABLE_FOR_IMAGE_TITLE=\\\"$:/config/ExternalAttachments/EnableForImage\\\",USE_ABSOLUTE_FOR_DESCENDENTS_TITLE=\\\"$:/config/ExternalAttachments/UseAbsoluteForDescendents\\\",USE_ABSOLUTE_FOR_NON_DESCENDENTS_TITLE=\\\"$:/config/ExternalAttachments/UseAbsoluteForNonDescendents\\\",MOVE_TO_WIKI_FOLDER_TITLE=\\\"$:/config/ExternalAttachments/MoveToWikiFolder\\\",WIKI_FOLDER_TO_MOVE_TITLE=\\\"$:/config/ExternalAttachments/WikiFolderToMove\\\",MOVE_TO_TRASH_TITLE=\\\"$:/config/ExternalAttachments/MoveToTrash\\\";function handleBeforeImporting(e,c=[],d){if(!e.fields.text.includes(\\\"willMoveFromPath\\\"))return e;const T=$tw.utils.parseJSONSafe(e.fields.text)?.tiddlers??{};Object.keys(T).forEach(i=>{var o=T[i];let{willMoveFromPath:n,willMoveToPath:r,...a}=o;if(n&&\\\"string\\\"==typeof n&&r&&\\\"string\\\"==typeof r){var s=matchTiddlerToWorkspace(i,Array.isArray(o.tags)?o.tags:[],c,$tw.wiki,$tw.rootWidget),l=s?.wikiFolderLocation??d;let e=r,t=o._canonical_uri;s&&(o=joinPaths(l,$tw.wiki.getTiddlerText(WIKI_FOLDER_TO_MOVE_TITLE,\\\"\\\")),e=joinPaths(o,basePath(n)),s=\\\"yes\\\"===$tw.wiki.getTiddlerText(USE_ABSOLUTE_FOR_NON_DESCENDENTS_TITLE,\\\"\\\"),o=\\\"yes\\\"===$tw.wiki.getTiddlerText(USE_ABSOLUTE_FOR_DESCENDENTS_TITLE,\\\"\\\"),t=makePathRelative(e,l,{useAbsoluteForNonDescendents:s,useAbsoluteForDescendents:o})),window.service?.[\\\"native\\\"]?.movePath?.(n,e,{fileToDir:!0});l={...$tw.wiki.getTiddler(i)?.fields,...a,_canonical_uri:t,...$tw.wiki.tiddlerExists(i)?{}:$tw.wiki.getCreationFields(),...$tw.wiki.getModificationFields()};l.created&&(l.created=$tw.utils.stringifyDate(l.created)),l.modified&&(l.modified=$tw.utils.stringifyDate(l.modified)),T[i]=l}});var t=new $tw.Tiddler(e,{text:JSON.stringify({tiddlers:T})});return $tw.wiki.addTiddler(t),t}function handleDeletingTiddler(e,t){if(\\\"yes\\\"===$tw.wiki.getTiddlerText(MOVE_TO_TRASH_TITLE,\\\"\\\")){var i=e.fields._canonical_uri;if(i&&\\\"string\\\"==typeof i){let e;e=i.startsWith(\\\"/\\\")||1<i.length&&\\\":\\\"===i[1]?i:joinPaths(t,i);try{window.service?.[\\\"native\\\"]?.moveToTrash?.(e),console.log(\\\"Moved file to trash: \\\"+e)}catch(o){console.error(\\\"Failed to move file to trash: \\\"+e,o)}}}return e}function handleImportingFile(e,t,i=0){if(e.type.startsWith(\\\"image\\\")&&\\\"no\\\"===$tw.wiki.getTiddlerText(ENABLE_FOR_IMAGE_TITLE,\\\"\\\"))return!1;let o=window.remote?.getPathForFile?.(e.file);var n=\\\"yes\\\"===$tw.wiki.getTiddlerText(ENABLE_EXTERNAL_ATTACHMENTS_TITLE,\\\"\\\");if(!(e.isBinary&&o&&n))return!1;n=t;let r;\\\"yes\\\"===$tw.wiki.getTiddlerText(MOVE_TO_WIKI_FOLDER_TITLE,\\\"\\\")&&(a=$tw.wiki.getTiddlerText(WIKI_FOLDER_TO_MOVE_TITLE,\\\"\\\"),s=o,a=joinPaths(n,a),l=joinPaths(a,basePath(o)),o.startsWith(a)||(r={willMoveToPath:l,willMoveFromPath:s},o=l));var a=\\\"yes\\\"===$tw.wiki.getTiddlerText(USE_ABSOLUTE_FOR_NON_DESCENDENTS_TITLE,\\\"\\\"),s=\\\"yes\\\"===$tw.wiki.getTiddlerText(USE_ABSOLUTE_FOR_DESCENDENTS_TITLE,\\\"\\\"),l=makePathRelative(o,n,{useAbsoluteForNonDescendents:a,useAbsoluteForDescendents:s}),n={title:e.file.name,type:e.type,_canonical_uri:l,willMoveFromPath:r?.willMoveFromPath,willMoveToPath:r?.willMoveToPath};return e.callback([n]),!0}async function convertToExternalAttachment(t,i,o){var n=$tw.wiki.getTiddler(t);if(n){var r=n.fields.text;const w=n.fields.type;if(r&&w){var a=$tw.config.contentTypeInfo[w]||{};if(\\\"base64\\\"!==a.encoding)console.log(\\\"[convertToExternalAttachment] Not a base64-encoded binary tiddler:\\\",t,\\\"encoding:\\\",a.encoding);else if(n.fields._canonical_uri)console.log(\\\"[convertToExternalAttachment] Already an external attachment:\\\",t);else{console.log(\\\"[convertToExternalAttachment] Converting binary tiddler to external attachment:\\\",t);var a=$tw.wiki.getTiddlerText(WIKI_FOLDER_TO_MOVE_TITLE,\\\"files\\\"),s=matchTiddlerToWorkspace(t,Array.isArray(n.fields.tags)?n.fields.tags:[],i,$tw.wiki,$tw.rootWidget)?.wikiFolderLocation??o;let e=t.replace(/\\\\/|\\\\\\\\/g,\\\"_\\\");var l=Object.keys($tw.config.fileExtensionInfo).filter(e=>$tw.config.fileExtensionInfo[e].type===w)[0]||\\\"\\\",l=(l&&!e.toLowerCase().endsWith(l.toLowerCase())&&(e+=l),a+\\\"/\\\"+(e=e.replace(/[<>:\\\"|?*]/g,\\\"_\\\"))),a=s+\\\"/\\\"+l;try{if(\\\"undefined\\\"!=typeof window&&window.service?.[\\\"native\\\"]?.saveBase64File){if(!await window.service[\\\"native\\\"].saveBase64File(a,r))throw new Error(\\\"Failed to save file\\\");console.log(\\\"[convertToExternalAttachment] File saved to:\\\",a);var c=encodeURIComponent(l).replace(/%2F/g,\\\"/\\\"),d={...n.fields,text:void 0,_canonical_uri:c};$tw.wiki.addTiddler(new $tw.Tiddler(d)),console.log(\\\"[convertToExternalAttachment] Tiddler updated with _canonical_uri:\\\",c),$tw.notifier.display(\\\"$:/plugins/linonetwo/tidgi-external-attachments/notifications/conversion-success\\\",{variables:{title:t,filepath:l}})}else console.error(\\\"[convertToExternalAttachment] TidGi native service not available\\\"),$tw.notifier.display(\\\"$:/plugins/linonetwo/tidgi-external-attachments/notifications/conversion-error\\\",{variables:{title:t,error:\\\"TidGi native service not available\\\"}})}catch(T){console.error(\\\"[convertToExternalAttachment] Error:\\\",T),$tw.notifier.display(\\\"$:/plugins/linonetwo/tidgi-external-attachments/notifications/conversion-error\\\",{variables:{title:t,error:T.message}})}}}else console.log(\\\"[convertToExternalAttachment] Not a binary tiddler:\\\",t)}else console.error(\\\"[convertToExternalAttachment] Tiddler not found:\\\",t)}function setupConvertToExternalHandler(i,o){$tw.rootWidget.addEventListener(\\\"tm-convert-to-external-attachment\\\",async e=>{var t=e.param||e.tiddlerTitle;t?await convertToExternalAttachment(t,i,o):console.error(\\\"[tm-convert-to-external-attachment] No title provided\\\")})}exports.name=\\\"tidgi-external-attachments\\\",exports.platforms=[\\\"browser\\\"],exports.after=[\\\"startup\\\"],exports.synchronous=!0,exports.makePathRelative=makePathRelative,exports.startup=function(){if(\\\"undefined\\\"!=typeof window&&\\\"function\\\"==typeof window.meta){const o=window?.meta?.()?.workspace?.id;o&&window?.service?.workspace?.get(o).then(async e=>{const t=e?.wikiFolderLocation;if(t){const i=await getWorkspacesWithRouting(o);$tw.hooks.addHook(\\\"th-importing-file\\\",function(e){return handleImportingFile(e,t,i)}),$tw.hooks.addHook(\\\"th-before-importing\\\",function(e){return handleBeforeImporting(e,i,t)}),setupConvertToExternalHandler(i,t),$tw.hooks.addHook(\\\"th-deleting-tiddler\\\",function(e){return handleDeletingTiddler(e,t)})}})}};\"}}}",
        "title": "$:/plugins/linonetwo/tidgi-external-attachments",
        "type": "application/json",
        "version": "1.10.1",
        "Modern.TiddlyDev#SHA256-Hashed": "8809a77abadebf5094f0d01ab276357b00556bb5b0c95cf6a5bc00b88b59706c"
    }
]