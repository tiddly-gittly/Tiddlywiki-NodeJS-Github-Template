{"tiddlers":{"$:/plugins/kookma/toc/history":{"title":"$:/plugins/kookma/toc/history","tags":"","type":"text/vnd.tiddlywiki","text":"Full change log  https://kookma.github.io/TW-TOC/#ChangeLog\n\n* ''1.5.0''  -- 2023.02.16 -- update to Tiddlywiki 5.2.5\n* ''1.4.1''  -- 2022.04.09 -- outlining was added\n* ''1.3.1''  -- 2021.09.27 -- stable release\n* ''0.1.0 '' -- 2020.01.23 -- initial release"},"$:/plugins/kookma/toc/icon":{"title":"$:/plugins/kookma/toc/icon","text":"<svg width=\"30\" height=\"30\" viewBox=\"0 0 1024 1024\" class=\"icon\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M707.004 461.38h56.314v28.669h-56.314zm0 63.481h56.314v28.669h-56.314zm0 62.457h56.314v27.645h-56.314zM847.276 714.28h55.29v27.645h-55.29zm0-63.481h55.29v28.669h-55.29zM440.794 265.818h28.669v-34.812h48.122v167.917H489.94v27.645H573.9v-27.645h-27.645V231.006h50.17v34.812h27.645v-63.48H440.794z\" fill=\"#FFB612\"/>\n  <path d=\"M623.124 579.46c-2.798-6.717-7.539-13.938-14.256-16.738-3.289-1.469-6.35-4.073-10.198-4.073H192.852c-3.848 0-7.556 2.604-10.845 4.073-6.717 2.799-14.412 9.104-17.21 15.82-1.47 3.289-4.548 7.914-4.548 11.762v202.908c0 3.848 3.077 7.556 4.547 10.845 2.799 6.717 9.34 10.863 16.058 13.662 3.289 1.47 8.151.997 11.999.997H598.67c3.848 0 7.556.472 10.845-.997 6.717-2.8 10.811-7.566 13.61-14.282 1.469-3.289.944-6.376.944-10.225V590.305c0-3.85.525-7.558-.945-10.845zM395.761 726.744c-19.311 0-34.984-15.673-34.984-34.985s15.673-34.984 34.984-34.984c19.312 0 34.984 15.673 34.984 34.984s-15.673 34.985-34.984 34.985zM892.537 461.38h-30.926v153.583h30.926c7.697 0 10.03-2.97 10.03-10.665V478.355c0-7.696-2.333-16.975-10.03-16.975zM752.601 650.8h-31.262v91.126h31.262c7.696 0 10.718-3.987 10.718-11.684V667.27c-.001-7.695-3.023-16.47-10.718-16.47z\" fill=\"#E0E0E0\"/>\n  <path d=\"M899.534 342.61H721.338V177.49c0-38.552-28.141-72.42-66.693-72.42H136.877c-38.552 0-73.897 33.868-73.897 72.42v671.698c0 38.552 35.345 66.797 73.897 66.797h643.71c41.562 0 76.127-27.645 82.774-68.6h36.173c34.705 0 59.346-26.464 59.346-61.17v-377.83c0-34.703-24.641-65.776-59.346-65.776zM91.65 177.49c0-23.159 22.069-43.752 45.228-43.752h67.4v71.74c0 23.16-16.253 38.84-39.412 38.84H91.649V177.49zm45.228 710.85c-23.16 0-45.228-15.993-45.228-39.152V272.985h73.216c38.552 0 66.032-28.955 66.032-67.508v-71.74h423.748c23.159 0 39.049 20.593 39.049 43.752v657.704c0 21.48 11.047 39.837 24.341 53.147H136.877zm696.065-479.954v426.807c0 30.856-24.946 55.975-55.802 55.975s-55.802-25.119-55.802-55.975V370.254h125.86c-6.717 15.359-14.256 25.188-14.256 38.132zm97.27 377.83c0 19.311-11.366 32.5-30.678 32.5h-37.923v-410.33c0-19.312 14.988-34.984 34.3-34.984s34.3 15.672 34.3 34.984v377.83z\" fill=\"#262626\"/>\n  <path d=\"M287.211 210.528H413.15v26.621H287.211zm0 62.457H413.15v27.645H287.211zM160.25 336.466h252.9v26.621h-252.9zm0 62.457h252.9v27.645h-252.9zm0 62.457h463.82v28.669H160.25zm28.67 286.688h-28.67v45.145c0 15.435 17.17 25.503 32.603 25.503h38.045v-27.645h-41.979v-43.003zm407.505 43.003h-44.027v27.645h46.273c15.435 0 25.4-10.068 25.4-25.503v-45.145h-27.646v43.003zm2.246-232.422h-46.273v28.669h44.027v43.003h27.645v-40.017c0-15.435-9.964-31.655-25.4-31.655zm-438.42 31.656v40.017h28.668V587.32h41.98V558.65h-38.046c-15.432 0-32.603 16.219-32.603 31.655zm235.511 38.482c-34.704 0-62.972 28.268-62.972 62.972 0 34.705 28.268 62.972 62.972 62.972s62.972-28.267 62.972-62.972-28.267-62.972-62.972-62.972zm0 97.957c-19.311 0-34.984-15.673-34.984-34.985s15.673-34.984 34.984-34.984c19.312 0 34.984 15.673 34.984 34.984s-15.673 34.985-34.984 34.985zM175.608 198.48v-37.098h-31.734c-11.575 0-24.58 11.53-24.58 23.105v32.185h38.574c11.575-.001 17.74-6.618 17.74-18.192z\" fill=\"#262626\"/>\n</svg>","type":"image/svg+xml","modified":"20240731133548160","tags":""},"$:/plugins/kookma/toc/license":{"title":"$:/plugins/kookma/toc/license","tags":"","type":"text/vnd.tiddlywiki","text":"Distributed under an MIT license.\n\nCopyright (c) 2020-2023 [[Mohammad Rahmani|https://github.com/kookma]]\n\n<<<\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n<<<"},"$:/plugins/kookma/toc/macros/helper":{"title":"$:/plugins/kookma/toc/macros/helper","tags":"$:/tags/Macro/Toc","type":"text/vnd.tiddlywiki","text":"\\define tidSelectedItem() $:/temp/toc/selected-item/$(stateTiddler)$\n\\define tidToggleState()  $:/temp/toc/toggle/$(stateTiddler)$\n\n\\define tidShowMode()  $:/temp/toc/show-mode/$(stateTiddler)$\n\\define tidExpandAll() $:/temp/toc/expand-all//$(stateTiddler)$\n\\define tidShowTools() $:/temp/toc/show-tools/$(stateTiddler)$\n\n\\define tidTocTemplate()    $:/plugins/kookma/toc/templates/show-single-item\n\\define tidBookmarkConfig() $:/config/toc/bookmarks/$(stateTiddler)$"},"$:/plugins/kookma/toc/macros/multilevel-draggable":{"title":"$:/plugins/kookma/toc/macros/multilevel-draggable","tags":"$:/tags/Macro/Toc","type":"text/vnd.tiddlywiki","text":"\\define toc-item-dragdata()      $:/temp/toc/dragdata\n\\define toc-item-dragdata-path() $:/temp/toc/dragdata/path\n\\define toc-item-dragstart()   \n<$action-setfield  $tiddler=<<toc-item-dragdata>> text=<<actionTiddler>> />\n<$action-setfield  $tiddler=<<toc-item-dragdata-path>> text=<<path>> />\n\\end\n\\define toc-item-dragend()  \n<$action-deletetiddler $tiddler=<<toc-item-dragdata>> />\n<$action-deletetiddler $tiddler=<<toc-item-dragdata-path>> />\n\\end\n\n\\define toc_caption()\n<$transclude field=\"caption\">\n   <$view field=\"title\" format=\"plainwikified\"/>\n</$transclude>\n\\end\n\n\\define toc-item-dragtip()\n<$wikify name=actionTiddler text={{{ [<toc-item-dragdata>get[text]] }}}><!--handles title with space in title-->\n<$vars actionTiddlerx={{{ [<toc-item-dragdata>get[text]] }}}>\n<$list filter=\"[<actionTiddler>!match<item>]\"> <!-- DON'T SHOW TIP ON SELF -->\n   <div class=\"kk-toc-dragtip\">\n      <nobr>drop <$tiddler tiddler=<<actionTiddler>>>''<<toc_caption>>''</$tiddler></nobr><br>\n      <nobr>onto <$tiddler tiddler=<<item>>         >''<<toc_caption>>''</$tiddler></nobr><br>\n      <div style=\"font-size:80%; border-top:1px solid; margin-top:0.2em;\">\n         NO KEY=insert before, SHIFT=insert after, CTRL=drop into\n      </div>\n   </div>\n</$list>\n</$vars>\n</$wikify>\n\\end\n\n\n\\define toc-item-drop()\n<$reveal default=<<actionTiddler>> type=\"nomatch\" text=<<item>>> <!-- DON'T DROP ON SELF -->\n   <!-- get OLDTAG and NEWTAG, exclude special tags -->\n   <$vars sourcepath={{{ [<toc-item-dragdata-path>get[text]] }}}\n          targetpath=<<path>> >\n   <$vars oldtag= {{{ [<sourcepath>split[/]]-[<actionTiddler>]+[last[]]  }}}\n           newtag={{{ [<targetpath>split[/]]-[<item>]+[last[]]  }}}>\n   <$reveal default=<<modifier>> type=\"match\" text=\"normal\"> <!-- DROP BEFORE SIBLING -->\n      <$set name=\"order\" filter=\"[<newtag>tagging[]]\">\n      <$list filter=<<order>>> <$action-deletefield $field=\"list-before\"/> <$action-deletefield $field=\"list-after\"/> </$list>\n      <$action-listops $tiddler=<<actionTiddler>> $field=\"tags\" $subfilter=\"-[<oldtag>] [<newtag>]\" />\n      <$action-listops $tiddler=<<oldtag>>        $field=\"list\" $subfilter=\"-[<actionTiddler>]\" />\n      <$action-listops $tiddler=<<newtag>>        $field=\"list\" $subfilter=\"[enlist<order>] -[<actionTiddler>] [<actionTiddler>] +[putbefore<item>]\" />\n      </$set>\n   </$reveal>\n   <$reveal default=<<modifier>> type=\"match\" text=\"shift\"> <!-- DROP AFTER SIBLING -->\n      <$set name=\"order\" filter=\"[<newtag>tagging[]]\">\n      <$list filter=<<order>>> <$action-deletefield $field=\"list-before\"/> <$action-deletefield $field=\"list-after\"/> </$list>\n      <$action-listops $tiddler=<<actionTiddler>> $field=\"tags\" $subfilter=\"-[<oldtag>] [<newtag>]\" />\n      <$action-listops $tiddler=<<oldtag>>        $field=\"list\" $subfilter=\"-[<actionTiddler>]\" />\n      <$action-listops $tiddler=<<newtag>>        $field=\"list\" $subfilter=\"[enlist<order>] -[<actionTiddler>] [<actionTiddler>] +[putafter<item>]\" />\n      </$set>\n   </$reveal>\n   <$reveal default=<<modifier>> type=\"match\" text=\"ctrl\"> <!-- DROP AS CHILD -->\n      <$set name=\"order\" filter=\"[<item>tagging[]]\">\n      <$list filter=<<order>>> <$action-deletefield $field=\"list-before\"/> <$action-deletefield $field=\"list-after\"/> </$list>\n      <$action-listops $tiddler=<<actionTiddler>> $field=\"tags\" $subfilter=\"-[<oldtag>] [<item>]\" />\n      <$action-listops $tiddler=<<oldtag>>        $field=\"list\" $subfilter=\"-[<actionTiddler>]\" />\n      <$action-listops $tiddler=<<item>>          $field=\"list\" $subfilter=\"[enlist<order>] -[<actionTiddler>] [<actionTiddler>]\" />\n      </$set>\n   </$reveal>\n   </$vars>\n   </$vars>\n</$reveal>\n\\end"},"$:/plugins/kookma/toc/macros/multilevel-exapndable":{"title":"$:/plugins/kookma/toc/macros/multilevel-exapndable","modified":"20240731133548160","tags":"$:/tags/Macro/Toc","type":"text/vnd.tiddlywiki","text":"\\define toc-open-icon() $:/core/images/down-arrow\n\\define toc-closed-icon() $:/core/images/right-arrow\n\n\\define toc-show-item-authormode(item, is-branch:no)\n<$vars item=<<__item__>> is-branch=<<__is-branch__>> >\n<$droppable actions=<<toc-item-drop>>>\n\t<div class=\"tc-droppable-placeholder kk-toc-placeholder\"></div> \n\t<$draggable tiddler=<<item>> startactions=<<toc-item-dragstart>> endactions=<<toc-item-dragend>> dragimagetype=\"blank\">\n \t{{$item$||$(tidTocTemplate)$}}\n\t</$draggable>\n\t<div class=\"tc-droppable-placeholder kk-toc-placeholder\"><<toc-item-dragtip>></div> \n</$droppable>\n</$vars>\n\\end\n\n\\define toc-show-item-readermode(item, is-branch:no)\n<$vars item=<<__item__>> is-branch=<<__is-branch__>> >\n    {{$item$||$(tidTocTemplate)$}}\n</$vars>\n\\end\n\n\n\\define toggle-branch()\n<$reveal type=\"nomatch\" stateTitle=<<tidToggleState>> stateIndex=<<path>> text=\"yes\">\n  <$button class=\"tc-btn-invisible\" setTitle=<<tidToggleState>> setIndex=<<path>> setTo=\"yes\">\n   <$transclude tiddler=<<toc-closed-icon>> />\n  </$button>\n </$reveal>\n <$reveal type=\"match\" stateTitle=<<tidToggleState>> stateIndex=<<path>> text=\"yes\">\n  <$button class=\"tc-btn-invisible\" setTitle=<<tidToggleState>> setIndex=<<path>> >\n\t <$transclude tiddler=<<toc-open-icon>> />\n  </$button>\n </$reveal>\n\\end \n\n\n\\define _toc-tree-body(here, exclude, path)\n<$vars path=\"\"\"$path$/$here$\"\"\">\n<$list filter=\"\"\"[tag[$here$]] $exclude$ +[limit[1]]\"\"\" emptyMessage=\"\"\"<li style=\"padding-left:1.2em\"><$macrocall $name=<<toc-show-mode>> item=<<__here__>> /></li>\"\"\" variable=ignore>\n <li><$macrocall $name=<<toc-show-mode>>  item=<<__here__>> is-branch=\"yes\"/></li>\n <$reveal type=\"match\" stateTitle=<<tidToggleState>> stateIndex=<<path>> text=\"yes\">\n <ol>\n   <$list filter=\"\"\"[tag[$here$]] $exclude$\"\"\">\n     <$macrocall $name=\"_toc-tree-body\" here=<<currentTiddler>> exclude=\"\"\"$exclude$ -[[$here$]]\"\"\" path=<<path>>/>\n   </$list>\n </ol>\n </$reveal>\n</$list> \n</$vars>\n\\end\n\n\n\\define toc-tree(here, exclude, mode)\n<$set name=toc-show-mode value=<<__mode__>> emptyValue=\"toc-show-item-readermode\">\n<div class=\"kk-toc\" style=\"margin-top:-10px;\">\n<ol>\n<$list filter=\"\"\"[tag[$here$]] $exclude$ -[[$here$]]\"\"\">\n<$macrocall $name=\"_toc-tree-body\" here=<<currentTiddler>> exclude=\"\"\"$exclude$ -[[$here$]]\"\"\" path=\"\"\"$here$\"\"\" />\n</$list>\n</ol>\n</div>\n</$set>\n\\end\n\n\\define item-path() $(path)$/$(item)$\n\n\\define _toc-expand(here, exclude, path)\n<$list filter=\"\"\"[tag[$here$]] $exclude$ -[[$here$]]\"\"\">\n<$vars item=<<currentTiddler>> path=\"\"\"$path$\"\"\" >\n   <$action-setfield $tiddler=<<tidToggleState>>  $index=\"\"\"$path$\"\"\" $value=\"yes\"/>\n   <$macrocall $name=\"_toc-expand\" here=<<item>> exclude=\"\"\"$exclude$ -[[$here$]]\"\"\" path=<<item-path>>/>\n</$vars>\t \n</$list>\n\\end\n\n\n\\define collapse-expand-all(here, exclude)\n<$reveal type=\"match\" stateTitle=<<tidExpandAll>> stateField=\"text\" text=\"expand-all\">\n<$button class=\"tc-btn-invisible kk-toc-btn\" tooltip=\"collapse all\">{{$:/core/images/fold-button}}\n<$action-deletetiddler $tiddler=<<tidToggleState>> />\n<$action-setfield $tiddler=<<tidExpandAll>>  text=\"collapse-all\"/>\n</$button>\n</$reveal>\n<$reveal type=\"nomatch\" stateTitle=<<tidExpandAll>> stateField=\"text\" text=\"expand-all\">\n<$button class=\"tc-btn-invisible kk-toc-btn\" tooltip=\"expand all\">{{$:/core/images/unfold-button}}\n<$macrocall $name=\"_toc-expand\" here=<<__here__>> exclude=<<__exclude__>> path=<<__here__>> />\n<$action-setfield $tiddler=<<tidExpandAll>>  text=\"expand-all\"/>\n</$button>\n</$reveal>\n\\end\n\n\\define multilevel-toc-expandable(tag:\"TableOfContents\", exclude:\"\", stateTiddler:\"multilevelState\")\n<$set name=stateTiddler value=<<__stateTiddler__>> >\n<$macrocall $name=collapse-expand-all  here=<<__tag__>> exclude=<<__exclude__>>  />\n<$macrocall $name=toc-tree here=<<__tag__>> exclude=<<__exclude__>> mode=\"toc-show-item-readermode\" />\n</$set>\n\\end"},"$:/plugins/kookma/toc/macros/multilevel-navigation":{"title":"$:/plugins/kookma/toc/macros/multilevel-navigation","tags":"$:/tags/Macro/Toc","type":"text/vnd.tiddlywiki","text":"\\define toc-list(here,exclude)\n<$list filter=\"\"\"[tag[$here$]] [subfilter<__exclude__>] -[<__here__>]\"\"\">\n   <$text text=\"[[\"/><<currentTiddler>><$text text=\"]]\"/>\n   <$macrocall $name=\"toc-list\" here=<<currentTiddler>> exclude=\"\"\"$exclude$ -[[$here$]]\"\"\"/>\n</$list>\n\\end\n\n\\define toc-hierarchical-navigation(tag:\"\", exclude:\"\", class, close:\"no\")\n\\define prev-actions()\n<$action-setfield $tiddler=<<tidSelectedItem>> text=<<prevTiddler>> />  \n<$list filter=\"[<__close__>match[yes]]\" variable=ignore><$action-sendmessage $message=\"tm-close-tiddler\" $param=<<currentTiddler>>/></$list>\n\\end prev-actions\n\n\\define next-actions()\n<$action-setfield $tiddler=<<tidSelectedItem>> text=<<nextTiddler>> />  \n<$list filter=\"[<__close__>match[yes]]\" variable=ignore><$action-sendmessage $message=\"tm-close-tiddler\" $param=<<currentTiddler>>/></$list>\n\\end next-actions\n\n<$wikify name=\"all\" text=\"\"\"<$macrocall $name=\"toc-list\" here=<<__tag__>> exclude=<<__exclude__>> />\"\"\">\n<$vars  prev={{{ [enlist<all>before<currentTiddler>] }}} >\n<$vars  next={{{ [enlist<all>after<currentTiddler>]  }}}  >\n<div class=\"$class$\">\n<$list filter=\"[<prev>!is[missing]]\" variable=\"prevTiddler\">\n<$button to=<<prevTiddler>> tooltip=<<prevTiddler>> class=\"tc-btn-invisible $class$\" actions=<<prev-actions>> >previous</$button>\n</$list>\n<$list filter=\"[<next>!is[missing]] [<prev>!is[missing]] +[count[]] -1 -0\" variable=ignore>|</$list>\n<$list filter=\"[<next>!is[missing]]\" variable=\"nextTiddler\">\n<$button to=<<nextTiddler>> tooltip=<<nextTiddler>> class=\"tc-btn-invisible $class$\" actions=<<next-actions>> >next</$button>\n</$list>\n</div>\n</$vars>\n</$vars>\n</$wikify>\n\\end toc-hierarchical-navigation\n\n\n\\define multilevel-toc-navigation(tag:\"TableOfContents\", exclude:\"\", close:\"no\", class:\"\", stateTiddler:\"multilevelState\")\n<$set name=stateTiddler value=<<__stateTiddler__>> >\n<$list filter=\"[<currentTiddler>!is[system]]\">\n   <div class=\"kk-toc-hideForPrint\">\n     <$macrocall $name=\"toc-hierarchical-navigation\"\n       tag=<<__tag__>> exclude=<<__exclude__>> close=<<__close__>> class=<<__class__>> />\n   </div>\n</$list>\n</$set>\n\\end"},"$:/plugins/kookma/toc/macros/multilevel-toc-all":{"title":"$:/plugins/kookma/toc/macros/multilevel-toc-all","tags":"$:/tags/Macro/Toc","type":"text/vnd.tiddlywiki","text":"\\define toc-all-body(here,exclude)\n<$list filter=\"\"\"[tag[$here$]] $exclude$ -[[$here$]]\"\"\">\n  <li><$link/></li>\n  <$list filter=\"[tag<currentTiddler>]+[limit[1]]\" variable=ignore>\n    <ol style=\"padding-left:1.5em\">\n      <$macrocall $name=\"toc-all-body\" here=<<currentTiddler>> exclude=\"\"\"$exclude$ -[[$here$]]\"\"\"/>\n    </ol>\n</$list>\n</$list>\n\\end\n\n\\define toc-all(tag, exclude)\n<div class=\"kk-toc\">\n  <ol>\n    <$macrocall $name=\"toc-all-body\" here=<<__tag__>> exclude=<<__exclude__>> />\n  </ol>\n</div>\n\\end"},"$:/plugins/kookma/toc/macros/multilevel-ui":{"title":"$:/plugins/kookma/toc/macros/multilevel-ui","tags":"$:/tags/Macro/Toc","type":"text/vnd.tiddlywiki","text":"\\define show-mode()\n<$reveal type=\"nomatch\" stateTitle=<<tidShowMode>> stateField=\"text\" text=\"toc-show-item-authormode\">\n<$button class=\"tc-btn-invisible kk-toc-btn\" tooltip=\"switch to author mode\">{{$:/core/images/edit-button}}\n<$action-setfield $tiddler=<<tidShowMode>>  text=\"toc-show-item-authormode\"/>\n</$button>\n</$reveal>\n<$reveal type=\"match\" stateTitle=<<tidShowMode>> stateField=\"text\" text=\"toc-show-item-authormode\">\n<$button class=\"tc-btn-invisible kk-toc-btn\" tooltip=\"switch to reader mode\">{{$:/core/images/done-button}}\n<$action-setfield $tiddler=<<tidShowMode>>  text=\"toc-show-item-readermode\"/>\n</$button>\n</$reveal>\n\\end\n\n\\define remove-all-bookmarks()\n<$button class=\"tc-btn-invisible kk-toc-btn\" tooltip=\"remove all bookmarks\">&#x2606;\n<$list filter=\"[<tidBookmarkConfig>!is[missing]]\" variable=ignore>\n<$action-deletetiddler $tiddler=<<tidBookmarkConfig>> />\n</$list>\n</$button>\n\\end\n\n\\define toggle-display-btnTools()\n<$list filter=\"[<tidShowTools>get[text]match[show]]\"\n emptyMessage=\"\"\"<$action-setfield $tiddler=<<tidShowTools>> text=\"show\"/>\"\"\">\n<$action-setfield $tiddler=<<tidShowTools>> text=\"hide\"/>\n</$list>\n\\end\n\n\\define toc-manager-ui()\n<span class=\"kk-toc-tools-manager\"> --- &nbsp;\n<$button class=\"tc-btn-invisible kk-toc-btn\" tooltip=\"toggle tools buttons\" actions=<<toggle-display-btnTools>>>\n{{$:/core/images/options-button}}\n</$button>\n<$reveal stateTitle=<<tidShowTools>> stateField=text text=\"show\" type=\"match\">\n<$macrocall $name=\"collapse-expand-all\" here=<<__tag__>> exclude=<<__exclude__>> />\n<$reveal type=nomatch stateTitle=<<adminTid>> stateField=\"text\" text=\"reader\" default=\"author\">\n<<show-mode>><!--only hide edit tools if adminTid tiddler text is reader-->\n</$reveal>\n<<remove-all-bookmarks>>\n</$reveal>\n</span>\n\\end\n\n\\define toc-ui(tag:\"TableOfContents\", exclude:\"\", stateTiddler:\"multilevelState\")\n<$set name=stateTiddler value=<<__stateTiddler__>> >\n<<toc-manager-ui>>\n<$macrocall $name=toc-tree here=<<__tag__>> exclude=<<__exclude__>> mode={{{[<tidShowMode>get[text]]}}} />\n</$set>\n\\end\n\n"},"$:/plugins/kookma/toc/macros/twolevel-expandable":{"title":"$:/plugins/kookma/toc/macros/twolevel-expandable","tags":"$:/tags/Macro/Toc","type":"text/vnd.tiddlywiki","text":"\\define toc-open-icon() $:/core/images/down-arrow\n\\define toc-closed-icon() $:/core/images/right-arrow\n\n\\define twolevel-toc-show-single-item(item)\n<$set name=\"openItemClass\" filter=\"[<tidSelectedItem>get[text]match<__item__>]\" value=\"tc-btn-invisible kk-toc-opened-item\" emptyValue=\"tc-btn-invisible tc-tiddlylink\">\n<$button class=<<openItemClass>> style=\"outline:none;\" to=<<__item__>> dragTiddler=<<__item__>>>\n  <$view tiddler=<<__item__>> field=\"caption\">\n    <$view tiddler=<<__item__>> field=\"title\"></$view>\n  </$view>\n<$action-setfield $tiddler=<<tidSelectedItem>> text=<<__item__>> />    \n</$button>\n</$set>\n\\end \n\n\n\\define twolevel-toc-body(here, exclude)\n<$list filter=\"\"\"[tag[$here$]] $exclude$ +[limit[1]]\"\"\" emptyMessage=\"\"\"<li class=\"kk-toc-item\" style=\"padding-left:1.2em\"><$macrocall $name=twolevel-toc-show-single-item item=<<__here__>> /></li>\"\"\" variable=ignore>\n<li class=\"kk-toc-item\">\n<$reveal type=\"nomatch\" stateTitle=<<tidToggleState>> stateIndex=<<__here__>> text=\"yes\">\n  <$button class=\"tc-btn-invisible tc-tiddlylink\" style=\"outline:none;\" setTitle=<<tidToggleState>> setIndex=<<__here__>> setTo=\"yes\">\n      <$transclude tiddler=<<toc-closed-icon>> />\n  </$button>\n </$reveal>\n <$reveal type=\"match\" stateTitle=<<tidToggleState>> stateIndex=<<__here__>> text=\"yes\">\n  <$button class=\"tc-btn-invisible tc-tiddlylink\" style=\"outline:none;\" setTitle=<<tidToggleState>> setIndex=<<__here__>> setTo=\"no\">\n      <$transclude tiddler=<<toc-open-icon>> />\n  </$button>\n </$reveal>\n<$macrocall $name=twolevel-toc-show-single-item item=<<__here__>> />\n</li>\n<$reveal type=\"match\" stateTitle=<<tidToggleState>> stateIndex=<<__here__>> text=\"yes\">\n<ol>\n<$list filter=\"\"\"[tag[$here$]] $exclude$\"\"\">\n<li class=\"kk-toc-item\"><$macrocall $name=twolevel-toc-show-single-item item=<<currentTiddler>> /></li>\n</$list>\n</ol>\n</$reveal>\n\\end\n\n\n\\define twolevel-toc-tree(here, exclude)\n<div class=\"kk-toc\" style=\"margin-top:-10px\">\n<ol>\n<$list filter=\"\"\"[tag[$here$]] $exclude$\"\"\"> \n<$macrocall $name=twolevel-toc-body here=<<currentTiddler>> exclude=<<__exclude__>> />\n</$list>\n</ol>\n</div>\n\\end\n\n\n\\define twolevel-toc-expand-all(here, exclude)\n<$list filter=\"\"\"[tag[$here$]] $exclude$\"\"\"> \n<$list filter=\"[tag<currentTiddler>count[]!match[0]]\" variable=ignore>\n<$action-setfield $tiddler=<<tidToggleState>>  $index=<<currentTiddler>> $value=\"yes\"/>\n</$list>\n</$list>\n\\end\n\n\n\\define twolevel-collapse-expand-all(here, exclude)\n<$reveal type=\"match\" stateTitle=<<tidExpandAll>> stateField=\"text\" text=\"expand-all\">\n<$button tooltip=\"collapse all\" class=\"tc-btn-invisible kk-toc-btn\" style=\"outline:none;\" tooltip=\"collapse all\">{{$:/core/images/fold-button}}\n<$action-deletetiddler $tiddler=<<tidToggleState>> />\n<$action-setfield $tiddler=<<tidExpandAll>>  text=\"collapse-all\"/>\n</$button>\n</$reveal>\n<$reveal type=\"nomatch\" stateTitle=<<tidExpandAll>> stateField=\"text\" text=\"expand-all\">\n<$button tooltip=\"expand all\" class=\"tc-btn-invisible kk-toc-btn\" style=\"outline:none;\">{{$:/core/images/unfold-button}}\n<$macrocall $name=\"twolevel-toc-expand-all\" here=<<__here__>> exclude=<<__exclude__>> />\n<$action-setfield $tiddler=<<tidExpandAll>>  text=\"expand-all\"/>\n</$button>\n</$reveal>\n\\end\n\n\n\\define twolevel-toc-expandable(tag:\"Contents\", exclude:\"\", stateTiddler:\"twolevelState\")\n<$set name=stateTiddler value=<<__stateTiddler__>> >\n<$macrocall $name=twolevel-collapse-expand-all  here=<<__tag__>> exclude=<<__exclude__>>  />\n<$macrocall $name=twolevel-toc-tree  here=<<__tag__>> exclude=<<__exclude__>>   />\n</$set>\n\\end"},"$:/plugins/kookma/toc/macros/twolevel-navigation":{"title":"$:/plugins/kookma/toc/macros/twolevel-navigation","tags":"$:/tags/Macro/Toc","type":"text/vnd.tiddlywiki","text":"\\define twolevel-toc-list(here, exclude)\n<$list filter=\"\"\"[tag[$here$]][<__exclude__>]\"\"\"> \n  <$text text={{{ [<currentTiddler>format:titlelist[]]  }}}/>\n  <$list filter=\"\"\"[tag<currentTiddler>] [<__exclude__>]\"\"\">\n    <$text text={{{ [<currentTiddler>format:titlelist[]]  }}}/>\n  </$list>\n</$list>\n\\end\n\n\n\\define twolevel-toc-hierarchical-navigation(tag:\"\", class, exclude:\"\", close:\"no\")\n\\define prev-actions()\n<$action-setfield $tiddler=<<tidSelectedItem>> text=<<prevTiddler>> />  \n<$list filter=\"[<__close__>match[yes]]\" variable=ignore><$action-sendmessage $message=\"tm-close-tiddler\" $param=<<currentTiddler>>/></$list>\n\\end prev-actions\n\n\\define next-actions()\n<$action-setfield $tiddler=<<tidSelectedItem>> text=<<nextTiddler>> />  \n<$list filter=\"[<__close__>match[yes]]\" variable=ignore><$action-sendmessage $message=\"tm-close-tiddler\" $param=<<currentTiddler>>/></$list>\n\\end next-actions\n\n<$wikify name=\"all\" text=\"\"\"<$macrocall $name=\"twolevel-toc-list\" here=<<__tag__>> exclude=<<__exclude__>>/>\"\"\">\n<$vars  prev={{{ [enlist<all>before<currentTiddler>] }}} >\n<$vars  next={{{ [enlist<all>after<currentTiddler>]  }}}  >\n<div class=\"$class$\">\n<$list filter=\"[<prev>!is[missing]]\" variable=\"prevTiddler\">\n<$button to=<<prevTiddler>> tooltip=<<prevTiddler>> class=\"tc-btn-invisible $class$\" actions=<<prev-actions>> >previous</$button>\n</$list>\n<$list filter=\"[<next>!is[missing]] [<prev>!is[missing]] +[count[]] -1 -0\" variable=ignore>|</$list>\n<$list filter=\"[<next>!is[missing]]\" variable=\"nextTiddler\">\n<$button to=<<nextTiddler>> tooltip=<<nextTiddler>> class=\"tc-btn-invisible $class$\" actions=<<next-actions>> >next</$button>\n</$list>\n</div>\n</$vars>\n</$vars>\n</$wikify>\n\\end twolevel-toc-hierarchical-navigation\n\n\\define twolevel-toc-navigation(tag:\"Contents\", exclude=<<__exclude__>>, close:\"no\", class:\"\", stateTiddler:\"twolevelState\")\n<$set name=stateTiddler value=<<__stateTiddler__>> >\n<$list filter=\"[<currentTiddler>!is[system]]\">\n   <div class=\"kk-twolevel-toc-hideForPrint\">\n     <$macrocall $name=twolevel-toc-hierarchical-navigation \n       tag=<<__tag__>> exclude=<<__exclude__>> close=<<__close__>> class=<<__class__>> />\n   </div>\n</$list>\n</$set>\n\\end"},"$:/plugins/kookma/toc/readme":{"title":"$:/plugins/kookma/toc/readme","tags":"","type":"text/vnd.tiddlywiki","text":"; TOC\nTOC plugin contains several macros, stylesheets and templates to create table of contents and navigator buttons. In contrast to Tiddlywiki core macros, the TOC plugin has many extra features including\n\n* non recursive two level toc\n* hierarchical navigation\n* exclude feature to exclude a branch or specific entries\n* track and highlight the TOC entry opened from table of contents or by navigation buttons\n\nLike core toc macro, TOC plugin supports also the recursive multi level table of contents, but here, it also support hierarchical navigation.\n\n;Code and demo\nFor learning plugin features, syntax, tutorial and examples see the plugin demo and code pages\n\n* Demo: https://kookma.github.io/TW-TOC/\n* Code: https://github.com/kookma/TW-TOC\n"},"$:/plugins/kookma/toc/styles/hierarchical-navigation":{"title":"$:/plugins/kookma/toc/styles/hierarchical-navigation","text":".kk-toc-navigation{\n font-weight: 600;\n}\n\n@media print {\n .kk-toc-hideForPrint{display:none;}\n}\n  ","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/kookma/toc/styles/main":{"title":"$:/plugins/kookma/toc/styles/main","text":"/* these styles are used to customize the TOC tree and ui */\n/* toc tree lists */\n.kk-toc ol {\n  list-style-type: none;\n  padding-left:0;\n}\n.kk-toc  ol ol{\n  list-style-type: none;\n  padding-left:2em;\n}\n\n/* bold first level entry and normal weight for other levels */\n.kk-toc li    .tc-tiddlylink{font-weight: bold;}\n.kk-toc ol ol .tc-tiddlylink{font-weight:normal;}\n\n\n.kk-toc-item            { text-align:left; white-space:nowrap; } /* prevent wrapping long entries*/\n.kk-toc-item img        { height:1em; width:1em; }\n.kk-toc-item svg        { height:1em; width:1em;}\n\n/* More tools button fade-in */\n.kk-toc-item       .kk-toc-tools        { opacity:0.0; }\n.kk-toc-item:hover .kk-toc-tools        { opacity:0.5; }\n.kk-toc-item:hover .kk-toc-tools:hover  { opacity:1.0; }\n\n/* bookmark button fade-in*/\n.kk-toc-item       .kk-bookmark        { opacity:0.0; }\n.kk-toc-item:hover .kk-bookmark        { opacity:0.5; }\n.kk-toc-item:hover .kk-bookmark:hover  { opacity:1.0; }\n.kk-toc-item       .kk-bookmark.show   { opacity:1.0 !important; }\n\n/*  drag and drop elements */\n.kk-toc-placeholder{ position:relative; border:0 !important; border-bottom:1px dotted blue !important; }\n.kk-toc-dragtip    {\n   position:absolute; z-index:1; right:0.5em; top:0.5em; padding:0.25em 0.5em;\n   border:1px solid lightgray; box-shadow: 0.3em 0.3em 0.5em rgba(0,0,0,0.3);\n   background:white; text-align:center; font-size:80%; line-height:100%;\n}\n\n\n/* set color of links when toc is used in a sidebar tab*/\n.tc-sidebar-lists .kk-toc-item .tc-tiddlylink{color:#999999}\n.tc-sidebar-lists .kk-toc-item svg        { height:1em; width:1em; fill: #acacac;}\n\n/* item when are visited NOT in sidebar*/\n/*.kk-toc li  .tc-tiddlylink{color:black;}  selected or clicked item */\n.kk-toc-opened-item{ \n\tpadding:0;\n\tpadding-left:5px; \n\tborder-radius: unset;\n\tborder-left-width:2px; \n\tborder-left-style:solid;}\n\n/* ui buttons on sidebar */\n.kk-toc button {outline:none;}\n.kk-toc-btn    {outline:none;}\n.tc-sidebar-lists  .kk-toc-btn svg { fill:  #acacac;}\n.tc-sidebar-lists  .kk-toc-btn     { color: #acacac;}\n\n\n\n\n/* manager buttons */\n.kk-toc-tools-manager        { opacity:0.5; }\n.kk-toc-tools-manager:hover  { opacity:1.0; }","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/kookma/toc/templates/bookmark":{"title":"$:/plugins/kookma/toc/templates/bookmark","type":"text/vnd.tiddlywiki","text":"\\define bkm-is-bookmark() $(tidBookmarkConfig)$##$(currentTiddler)$\n\\define bkm-emptystar()   &#x2606;\n\\define bkm-filledstar()  &#x2605;\n\\define bkm-tip-addbkm()  add '$(tiptext)$' to Bookmarks\n\\define bkm-tip-rembkm()  remove '$(tiptext)$' from Bookmarks\n\n<!-- ADD/REMOVE ITEM FROM BOOKMARKS -->\n<$set name=\"tiptext\" filter=\"[<currentTiddler>has[caption]]\" value={{!!caption}} emptyValue={{!!title}}>\n<$reveal state=<<bkm-is-bookmark>> type=\"match\" text=\"\">\n   <$button class=\"tc-btn-invisible\" tooltip=<<bkm-tip-addbkm>>>\n      <$action-setfield $tiddler=<<tidBookmarkConfig>> $index=<<currentTiddler>> $value=<<now>>/>\n      <span class=\"kk-bookmark\"><<bkm-emptystar>></span>\n   </$button>\n</$reveal>\n<$reveal state=<<bkm-is-bookmark>> type=\"nomatch\" text=\"\">\n   <$button class=\"tc-btn-invisible kk-toc-btn\" tooltip=<<bkm-tip-rembkm>>>\n      <$action-setfield    $tiddler=<<tidBookmarkConfig>> $index=<<currentTiddler>>/> <!-- DELETEINDEX -->\n      <span class=\"kk-bookmark.show\"><<bkm-filledstar>></span>\n   </$button></$reveal>\n</$set>"},"$:/plugins/kookma/toc/templates/more-actions":{"title":"$:/plugins/kookma/toc/templates/more-actions","type":"text/vnd.tiddlywiki","text":"\\whitespace trim\n\\define config-title()\n$:/config/ViewToolbarButtons/Visibility/$(listItem)$\n\\end\n<$button popup=<<qualify \"$:/state/popup/more\">> tooltip={{$:/language/Buttons/More/Hint}} aria-label={{$:/language/Buttons/More/Caption}} class=<<tv-config-toolbar-class>> selectedClass=\"tc-selected\">\n<$list filter=\"[<tv-config-toolbar-icons>match[yes]]\">\n{{$:/core/images/down-arrow}}\n</$list>\n<$list filter=\"[<tv-config-toolbar-text>match[yes]]\">\n<span class=\"tc-btn-text\">\n<$text text=\" \"/>\n<$text text={{$:/language/Buttons/More/Caption}}/>\n</span>\n</$list>\n</$button>\n<$reveal state=<<qualify \"$:/state/popup/more\">> type=\"popup\" position=\"belowleft\" animate=\"yes\">\n\n<div class=\"tc-drop-down\">\n\n<$set name=\"tv-config-toolbar-icons\" value=\"yes\">\n\n<$set name=\"tv-config-toolbar-text\" value=\"yes\">\n\n<$set name=\"tv-config-toolbar-class\" value=\"tc-btn-invisible\">\n\n<$list filter=\"$:/core/ui/Buttons/new-here $:/core/ui/Buttons/new-journal-here $:/core/ui/Buttons/clone $:/core/ui/Buttons/open-window\" variable=\"listItem\">\n\n<$set name=\"tv-config-toolbar-class\" filter=\"[<tv-config-toolbar-class>] [<listItem>encodeuricomponent[]addprefix[tc-btn-]]\">\n\n<$transclude tiddler=<<listItem>> mode=\"inline\"/>\n\n</$set>\n\n</$list>\n\n</$set>\n\n</$set>\n\n</$set>\n\n</div>\n\n</$reveal>"},"$:/plugins/kookma/toc/templates/show-single-item":{"title":"$:/plugins/kookma/toc/templates/show-single-item","tags":"show-content","type":"text/vnd.tiddlywiki","text":"\\define toc-show-menu()\n<!-- SHOW AUTHOR TOOLS AND BOOKMARK STAR -->\n<span class=\"kk-toc-tools\"> {{||$:/plugins/kookma/toc/templates/more-actions}} </span>\n{{||$:/plugins/kookma/toc/templates/bookmark}}\n\\end\n\n\\define show-single-item()\n<$set name=\"openItemClass\" filter=\"[<tidSelectedItem>get[text]match<item>]\" value=\"tc-btn-invisible tc-tiddlylink kk-toc-opened-item\" emptyValue=\"tc-btn-invisible tc-tiddlylink\">\n<!--show the toggle branch button if the item is a branch -->\n<$list filter=\"[<is-branch>match[yes]]\" variable=ignore><<toggle-branch>></$list>\n<$button class=<<openItemClass>> style=\"outline:none;\" to=<<item>> >\n <$tiddler tiddler=<<item>>><<toc_caption>></$tiddler>\n<$action-setfield $tiddler=<<tidSelectedItem>> text=<<item>> />  \n</$button>\n</$set>\n\\end \n\n<$reveal default=<<toc-show-mode>> type=\"match\" text=\"toc-show-item-authormode\" >\n<div class=\"kk-toc-item\" title=\"drag to rearrange items\">\n <<show-single-item>>\n <span style=\"float:right;margin-left:0.5em;\"> <<toc-show-menu>> </span>\n <div style=\"clear:both;\"></div>\n</div>\n</$reveal>\n<$reveal default=<<toc-show-mode>> type=\"nomatch\" text=\"toc-show-item-authormode\" >\n<div class=\"kk-toc-item\" title={{!!title}}>\n <<show-single-item>>\n<!--1. comment to deactivate bookmarks in reader mode-->\n <span style=\"float:right;margin-left:0.5em;\">\n  {{||$:/plugins/kookma/toc/templates/bookmark}}\n </span>\n <div style=\"clear:both;\"></div>\n<!--1. end -->\n</div>\n</$reveal>\n\n"}}}